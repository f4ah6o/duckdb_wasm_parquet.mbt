(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const Ae="modulepreload",Re=function(e,t){return new URL(e,t).href},te={},C=function(t,n,a){let o=Promise.resolve();if(n&&n.length>0){let T=function(b){return Promise.all(b.map(h=>Promise.resolve(h).then($=>({status:"fulfilled",value:$}),$=>({status:"rejected",reason:$}))))};const s=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),i=c?.nonce||c?.getAttribute("nonce");o=T(n.map(b=>{if(b=Re(b,a),b in te)return;te[b]=!0;const h=b.endsWith(".css"),$=h?'[rel="stylesheet"]':"";if(a)for(let f=s.length-1;f>=0;f--){const g=s[f];if(g.href===b&&(!h||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${$}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":Ae,h||(d.as="script"),d.crossOrigin="",d.href=b,i&&d.setAttribute("nonce",i),document.head.appendChild(d),h)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${b}`)))})}))}function r(s){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=s,window.dispatchEvent(c),!c.defaultPrevented)throw s}return o.then(s=>{for(const c of s||[])c.status==="rejected"&&r(c.reason);return t().catch(r)})},Le={$tag:0},Ie={$tag:1},ve={$tag:2},Ne={$tag:3},Pe={$tag:4},De={$tag:5},Be={$tag:6},Me={$tag:7},Fe={$tag:8},Ue={$tag:9},je={$tag:10},We={$tag:11},Ve={$tag:12},Ge={$tag:13},He={$tag:14},Ye={$tag:15},ze={$tag:16},Je={$tag:17},Ke={$tag:18},Qe={$tag:19},Xe={$tag:20},xe={$tag:21},Ze={$tag:22},et={$tag:23},tt={$tag:24},nt={$tag:25},rt={$tag:26},ot={$tag:27},at={$tag:28},st={$tag:29},ct={$tag:30},$t={$tag:31},it={$tag:32},ut={$tag:33},dt={$tag:34},_t={$tag:35},lt={$tag:36},ft={$tag:37},pt={$tag:38},mt={$tag:39};function H(e){this._0=e}H.prototype.$tag=40;class bt extends Error{}function N(){throw new bt}function D(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds")}function M(e){this._0=e}M.prototype.$tag=0;function $e(e){this._0=e}$e.prototype.$tag=1;function Y(e){this._0=e}Y.prototype.$tag=2;const gt={$tag:1},ne={$tag:0},ht=(e,t)=>e.toString(t),wt=(e,t)=>{e.push(t)},kt=(e,t,n,a)=>{const o=$=>$&&$.message?$.message:String($);let r=null,s=null;const c=($,d)=>{if($==null)return["",!0];if(typeof $=="string"){if(d!==null&&(d===r||d===s)){if($==="NaN")return["nan",!1];if($==="Infinity")return["inf",!1];if($==="-Infinity")return["-inf",!1]}return[$,!1]}return typeof $=="number"?Number.isNaN($)?["nan",!1]:$===1/0?["inf",!1]:$===-1/0?["-inf",!1]:[String($),!1]:typeof $=="boolean"||typeof $=="bigint"?[String($),!1]:[JSON.stringify($),!1]},i=($,d,f,g)=>{const k=[],E=[];for(let m=0;m<$.length;m++){const y=c($[m],g?g[m]:null);k.push(y[0]),E.push(y[1])}d.push(k),f.push(E)},T=async()=>{const $=await C(()=>import("./duckdb-node-api-xmTyaD0R.js"),[],import.meta.url);r=$.DuckDBTypeId.FLOAT,s=$.DuckDBTypeId.DOUBLE;const d=await e.connection.run(t),f=d.columnNames(),g=await d.getRowsJson(),k=f.map((y,O)=>d.columnTypeId(O)),E=[],m=[];for(const y of g){const O=Array.isArray(y)?y:f.map(j=>y[j]);i(O,E,m,k)}n(f,E,m,k)},b=async()=>{const $=await e.conn.query(t);let d=[];$&&$.schema&&$.schema.fields&&(d=$.schema.fields.map(m=>m.name));const f=$.toArray().map(m=>m.toJSON());d.length===0&&f.length>0&&(d=Object.keys(f[0]));const g=[],k=[];for(const m of f){const y=d.map(O=>m[O]);i(y,g,k,null)}n(d,g,k,[])};(async()=>{if(e&&e.kind==="node"){await T();return}if(e&&e.kind==="wasm"){await b();return}throw new Error("unknown connection backend")})().catch($=>a(o($)))},yt=(e,t,n)=>{const a=r=>r&&r.message?r.message:String(r);(async()=>{if(e&&e.kind==="node"){e.connection&&typeof e.connection.closeSync=="function"&&e.connection.closeSync(),e.instance&&typeof e.instance.close=="function"&&await e.instance.close(),t();return}if(e&&e.kind==="wasm"){e.conn&&typeof e.conn.close=="function"&&await e.conn.close(),e.db&&typeof e.db.terminate=="function"&&await e.db.terminate(),e.worker&&typeof e.worker.terminate=="function"&&e.worker.terminate(),t();return}throw new Error("unknown connection backend")})().catch(r=>n(a(r)))};function ie(e){this._0=e}ie.prototype.$tag=0;function ue(e){this._0=e}ue.prototype.$tag=1;function de(e){this._0=e}de.prototype.$tag=0;function _e(e){this._0=e}_e.prototype.$tag=1;const Et=(e,t)=>{(async()=>{try{if(!navigator.storage||!navigator.storage.getDirectory){e(!1);return}await navigator.storage.getDirectory(),e(!0)}catch{e(!1)}})().catch(a=>t(a.message||String(a)))};function le(e){this._0=e}le.prototype.$tag=0;function fe(e){this._0=e}fe.prototype.$tag=1;const St=(e,t,n)=>{const a=r=>r&&r.message?r.message:String(r);(async()=>{if(typeof Worker>"u")throw new Error("duckdb-wasm requires Worker support");const r=await C(()=>import("./duckdb-browser-odMagBQf.js"),[],import.meta.url),{default:s}=await C(async()=>{const{default:_}=await import("./duckdb-mvp-COpBb6_W.js");return{default:_}},[],import.meta.url),{default:c}=await C(async()=>{const{default:_}=await import("./duckdb-browser-mvp.worker-DL79tyL4.js");return{default:_}},[],import.meta.url),{default:i}=await C(async()=>{const{default:_}=await import("./duckdb-eh-ko5btiDl.js");return{default:_}},[],import.meta.url),{default:T}=await C(async()=>{const{default:_}=await import("./duckdb-browser-eh.worker-DAjoLXVM.js");return{default:_}},[],import.meta.url),b={mvp:{mainModule:s,mainWorker:c},eh:{mainModule:i,mainWorker:T}},h=await r.selectBundle(b),$=new r.ConsoleLogger(r.LogLevel.WARNING);if(!h.mainWorker)throw new Error("duckdb-wasm bundle missing mainWorker");const d=new Worker(h.mainWorker),f=new r.AsyncDuckDB($,d);await f.instantiate(h.mainModule,h.pthreadWorker);const g=_=>{window.__duckdb_storage=_},k=_=>{window.__duckdb_storage_name=_},E=async()=>{await f.open({query:{castBigIntToDouble:!0}}),g("memory"),k(":memory:")},m=async _=>{const L=_.startsWith("opfs://")?_:`opfs://${_}`;await f.open({path:L,accessMode:3,opfs:{fileHandling:"auto"},query:{castBigIntToDouble:!0}}),g("opfs"),k(_)},y=_=>_.includes("not a valid DuckDB database file")||_.includes("Access Handles cannot be created")||_.includes("createSyncAccessHandle"),O=_=>{const L=`${Date.now()}-${Math.random().toString(16).slice(2)}`;return _.endsWith(".db")?`${_.slice(0,-3)}-${L}.db`:`${_}-${L}`};if(e&&e!==":memory:")try{await navigator.storage.getDirectory(),await m(e)}catch(_){const L=a(_);if(y(L))try{await m(O(e))}catch(Ce){console.warn("OPFS retry failed, using in-memory database:",Ce),await E()}else console.warn("OPFS not available, using in-memory database:",_),await E()}else await E();const j=await f.connect();t({kind:"wasm",db:f,conn:j,worker:d})})().catch(r=>n(a(r)))};function pe(e){this._0=e}pe.prototype.$tag=0;function me(e){this._0=e}me.prototype.$tag=1;const qt=(e,t,n,a,o)=>{(async()=>{if(!e||e.kind!=="wasm"||!e.db)throw new Error("Connection must be a WASM connection");const s=await C(()=>import("./duckdb-browser-odMagBQf.js"),[],import.meta.url);await e.db.registerFileURL(t,n,s.DuckDBDataProtocol.HTTP,!1),a()})().catch(s=>o(s.message||String(s)))};function z(e){this._0=e}z.prototype.$tag=0;function J(e){this._0=e}J.prototype.$tag=1;const Tt=(e,t,n)=>{(async()=>{const o=await navigator.storage.getDirectory();try{await o.removeEntry(e)}catch(r){if(r.name!=="NotFoundError")throw r}t()})().catch(o=>n(o.message||String(o)))},be=e=>{window.__duckdb_conn=e},P=()=>{const e=window.__duckdb_conn;return e?{$tag:1,_0:e}:{$tag:0}},B=()=>!!window.__duckdb_conn,K=e=>{window.__parquet_loaded=e},Q=()=>!!window.__parquet_loaded,ge=()=>window.__duckdb_storage||"unknown",he=()=>window.__duckdb_storage_name||"",l=e=>console.log("[app] "+e),w=e=>console.error("[app] "+e),we=()=>"https://duckdb-wasm-mbt.f12o.com/P78BHZM3MD3MV47JDZG47PB8PW.parquet",X=(e,t)=>{const n=document.querySelector(e);n&&(n.innerHTML=t)},I=(e,t)=>{const n=document.querySelector(e);n&&(n.disabled=t)},Ot=()=>{const e=document.querySelector("#sql-input");return e?e.value:""},Ct={method_0:p,method_1:Pt,method_2:ye,method_3:x},At=new H(-1),S="stats";function U(e){return{val:""}}function x(e,t){const n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function Rt(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function V(e,t){const n=e.length;return t>=0&&t<n?(D(e,t),e[t]):N()}function ke(e,t){const n=e.length;return t>=0&&t<n?(D(e,t),e[t]):N()}function Lt(e,t){const n=e.length;return t>=0&&t<n?(D(e,t),e[t]):N()}function It(e,t){const n=e.length;return t>=0&&t<n?(D(e,t),e[t]):N()}function vt(e,t){const n=e.length;return t>=0&&t<n?(D(e,t),e[t]):N()}function p(e,t){const n=e;n.val=`${n.val}${t}`}function Nt(e,t,n){const a=e.length;let o;if(n===void 0)o=a;else{const c=n;o=c<0?a+c|0:c}const r=t<0?a+t|0:t;if(r>=0&&r<=o&&o<=a){let s;if(r<a){const i=e.charCodeAt(r);s=56320<=i&&i<=57343}else s=!1;if(s)return new M(ne);let c;if(o<a){const i=e.charCodeAt(o);c=56320<=i&&i<=57343}else c=!1;return c?new M(ne):new $e({str:e,start:r,end:o})}else return new M(gt)}function Pt(e,t,n,a){let o;e:{t:{const r=Nt(t,n,n+a|0);if(r.$tag===1)o=r._0;else{r._0;break t}break e}o=N()}ye(e,o)}function Dt(e){const t=U(),n={self:t,method_table:Ct};return e?n.method_table.method_0(n.self,"true"):n.method_table.method_0(n.self,"false"),t.val}function A(e,t){return ht(e,t)}function Bt(e){return e.str.substring(e.start,e.end)}function ye(e,t){const n=e;n.val=`${n.val}${Bt(t)}`}function re(e,t){wt(e,t)}function Ee(e){return e()}function Se(e){const t=e.length,n={val:0};return()=>{if(n.val<t){const o=n.val,r=e.charCodeAt(o);if(55296<=r&&r<=56319&&(n.val+1|0)<t){const s=n.val+1|0,c=e.charCodeAt(s);if(56320<=c&&c<=57343){const i=Rt(r,c);return n.val=n.val+2|0,i}}return n.val=n.val+1|0,r}else return-1}}function Mt(e){switch(e){case 0:return Le;case 1:return Ie;case 2:return ve;case 3:return Ne;case 4:return Pe;case 5:return De;case 6:return Be;case 7:return Me;case 8:return Fe;case 9:return Ue;case 10:return je;case 11:return We;case 12:return Ve;case 13:return Ge;case 14:return He;case 15:return Ye;case 16:return ze;case 17:return Ke;case 18:return Qe;case 19:return Xe;case 20:return xe;case 21:return Ze;case 22:return et;case 23:return tt;case 24:return nt;case 25:return rt;case 26:return ot;case 27:return st;case 28:return ct;case 29:return $t;case 30:return it;case 31:return ut;case 32:return Je;case 33:return at;case 34:return dt;case 35:return _t;case 36:return lt;case 37:return ft;case 38:return pt;case 39:return mt;default:return new H(e)}}function Ft(e,t){const n=[],a=e.length;let o=0;for(;;){const r=o;if(r<a){r<t.length?re(n,Mt(vt(t,r))):re(n,At),o=r+1|0;continue}else break}return n}function Ut(e,t){yt(e,()=>{t(new ue(void 0))},n=>{t(new ie(new Y(n)))})}function q(e,t,n){kt(e,t,(a,o,r,s)=>{const c=Ft(a,s);n(new _e({columns:a,column_types:c,rows:o,nulls:r}))},a=>{n(new de(new Y(a)))})}function jt(e){Et(t=>{e(new fe(t))},t=>{e(new le(t))})}function qe(e,t){St(e,n=>{t(new me(n))},n=>{t(new pe(n))})}function Wt(e,t,n,a){qt(e,t,n,()=>{a(new J(void 0))},o=>{a(new z(o))})}function oe(e,t){Tt(e,()=>{t(new J(void 0))},n=>{t(new z(n))})}function u(e){X("#status",e)}function v(e){X("#result",e)}function F(e){X("#row-count",e)}function R(e){return e._0}function W(){l("Database ready!");const e=ge(),t=he();let n;e==="opfs"?n=`Ready (OPFS)${t===""||t==="duckdb.db"?"":` (${t})`}. Click 'Fetch Parquet' to load data.`:n=e==="memory"?"Ready (in-memory). Click 'Fetch Parquet' to load data.":"Ready. Click 'Fetch Parquet' to load data.",u(n),I("#btn-fetch",!1),I("#btn-execute",!1)}function Te(e){l("Installing extensions..."),u("Installing extensions..."),q(e,"INSTALL parquet; LOAD parquet;",t=>{if(t.$tag===1){l("Parquet extension installed"),q(e,"INSTALL json; LOAD json;",n=>{if(n.$tag===1){l("JSON extension installed"),W();return}else{const o=n._0;w(`JSON extension failed: ${R(o)}`),W();return}});return}else{const a=t._0;w(`Parquet extension failed: ${R(a)}`),W();return}})}function G(){l("Opening in-memory database..."),u("Opening in-memory database..."),qe(":memory:",e=>{if(e.$tag===1){const n=e._0;be(n),l("In-memory database opened successfully"),Te(n);return}else{const n=e._0;w(`Failed to open database: ${n}`),u(`Error: Failed to initialize database - ${n}`);return}})}function Vt(){l("Opening OPFS database..."),u("Opening persistent database..."),qe("duckdb.db",e=>{if(e.$tag===1){const n=e._0;be(n);const a=ge(),o=he();l(a==="opfs"?o===""||o==="duckdb.db"?"OPFS database opened successfully":`OPFS database opened with alternate name: ${o}`:a==="memory"?"OPFS unavailable, using in-memory database":"Database opened successfully"),Te(n);return}else{const n=e._0;w(`OPFS database failed: ${n}`),G();return}})}function Gt(){l("Initializing application..."),u("Initializing DuckDB..."),jt(e=>{if(e.$tag===1){const n=e._0;if(l(`OPFS supported: ${Dt(n)}`),n){Vt();return}else{G();return}}else{const n=e._0;w(`OPFS check failed: ${n}`),G();return}})}function Z(){if(B())if(Q()){const e=P();if(e.$tag===1){const n=e._0,a=`SELECT COUNT(*) as cnt FROM ${S}`;q(n,a,o=>{if(o.$tag===1){const s=o._0;if(s.rows.length>0){const c=V(ke(s.rows,0),0);F(`Total rows: ${c}`);return}else return}else{F("Error counting rows");return}});return}else return}else{F("No data loaded");return}else return}function Oe(e){const t=we(),n=`CREATE OR REPLACE TABLE ${S} AS SELECT * FROM read_parquet('${t}')`;q(e,n,a=>{if(a.$tag===1){K(!0),l("Table created from URL"),u("Parquet data loaded successfully!"),I("#btn-fetch",!1),Z();return}else{const r=a._0,s=R(r);w(`Direct URL query failed: ${s}`),u(`Error: Failed to load parquet - ${s}`),I("#btn-fetch",!1);return}})}function Ht(e){const t=`CREATE OR REPLACE TABLE ${S} AS SELECT * FROM read_parquet('stats.parquet')`;q(e,t,n=>{if(n.$tag===1){K(!0),l("Table created from parquet"),u("Parquet data loaded successfully!"),I("#btn-fetch",!1),Z();return}else{const o=n._0;w(`Table creation failed: ${R(o)}`),Oe(e);return}})}function Yt(){if(B()){const e=P();if(e.$tag===1){const n=e._0;l("Fetching parquet file..."),u("Fetching parquet file..."),I("#btn-fetch",!0);const a=we();Wt(n,"stats.parquet",a,o=>{if(o.$tag===1){l("Remote file registered"),Ht(n);return}else{const s=o._0;w(`Failed to register file: ${s}`),Oe(n);return}});return}else{u("Error: No connection");return}}else{u("Error: Database not initialized");return}}function zt(e){const t=U(),n=Se(e);for(;;){const a=Ee(n);if(a===-1)break;{const r=a;r===39?p(t,"''"):x(t,r);continue}}return t.val}function ae(e){const t=U(),n=Se(e);for(;;){const a=Ee(n);if(a===-1)break;{const r=a;r===60?p(t,"&lt;"):r===62?p(t,"&gt;"):r===38?p(t,"&amp;"):r===34?p(t,"&quot;"):x(t,r);continue}}return t.val}function ee(e){const t=U(),n=e.rows.length,a=n>1e3?1e3:n;p(t,'<table class="result-table"><thead><tr>');let o=0;for(;;){const s=o;if(s<e.columns.length){p(t,"<th>"),p(t,ae(V(e.columns,s))),p(t,"</th>"),o=s+1|0;continue}else break}p(t,"</tr></thead><tbody>");let r=0;for(;;){const s=r;if(s<a){p(t,"<tr>");let c=0;for(;;){const i=c;if(i<e.columns.length){p(t,"<td>"),Lt(It(e.nulls,s),i)?p(t,'<span class="null">NULL</span>'):p(t,ae(V(ke(e.rows,s),i))),p(t,"</td>"),c=i+1|0;continue}else break}p(t,"</tr>"),r=s+1|0;continue}else break}p(t,"</tbody></table>"),n>1e3&&p(t,`<p class="notice">Showing ${A(1e3,10)} of ${A(n,10)} rows</p>`),v(t.val)}function Jt(e){if(e.length===0){v("");return}if(B())if(Q()){const t=P();if(t.$tag===1){const a=t._0,o=zt(e),r=`SELECT timestamp, connection_id, rtc_type FROM ${S} WHERE connection_id LIKE '%${o}%' OR channel_id LIKE '%${o}%' OR timestamp LIKE '%${o}%' OR rtc_type LIKE '%${o}%' USING SAMPLE 1 PERCENT (bernoulli)`;l(`Search: ${e}`),q(a,r,s=>{if(s.$tag===1){const i=s._0;l(`Search returned ${A(i.rows.length,10)} rows`),ee(i);return}else{const i=s._0,T=R(i);w(`Search failed: ${T}`),v("");return}});return}else return}else return;else return}function Kt(){if(B()){const e=P();if(e.$tag===1){const n=e._0,a=Ot();if(a.length===0){u("Please enter a SQL query");return}l(`Executing: ${a}`),u("Executing query..."),q(n,a,o=>{if(o.$tag===1){const s=o._0;l(`Query returned ${A(s.rows.length,10)} rows`),u(`Query completed: ${A(s.rows.length,10)} rows`),ee(s);return}else{const s=o._0,c=R(s);w(`Query failed: ${c}`),u(`Error: ${c}`),v('<div class="error">Error: (check console)</div>');return}});return}else{u("Error: No connection");return}}else{u("Error: Database not initialized");return}}function Qt(e){if(B())if(Q()){const t=P();if(t.$tag===1){const a=t._0;let o;switch(e){case"samples":{o=`SELECT timestamp, connection_id, rtc_type FROM ${S} USING SAMPLE 1 PERCENT (bernoulli)`;break}case"aggregation":{o=`SELECT time_bucket, channel_id, session_id, connection_id, bytes_sent_diff, bytes_received_diff, packets_sent_diff, packets_received_diff FROM ( SELECT time_bucket, channel_id, session_id, connection_id, bytes_sent - LAG(bytes_sent) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS bytes_sent_diff, bytes_received - LAG(bytes_received) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS bytes_received_diff, packets_sent - LAG(packets_sent) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS packets_sent_diff, packets_received - LAG(packets_received) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS packets_received_diff FROM ( SELECT strftime(time_bucket('15 seconds', strptime(timestamp, '%Y-%m-%dT%H:%M:%S.%fZ')), '%Y-%m-%d %H:%M:%S') AS time_bucket, channel_id, session_id, connection_id, MAX(CAST(rtc_data->'$.bytesSent' AS BIGINT)) AS bytes_sent, MAX(CAST(rtc_data->'$.bytesReceived' AS BIGINT)) AS bytes_received, MAX(CAST(rtc_data->'$.packetsSent' AS BIGINT)) AS packets_sent, MAX(CAST(rtc_data->'$.packetsReceived' AS BIGINT)) AS packets_received FROM ${S} WHERE rtc_type = 'transport' GROUP BY time_bucket, channel_id, session_id, connection_id ) ) WHERE bytes_sent_diff IS NOT NULL AND bytes_received_diff IS NOT NULL AND packets_sent_diff IS NOT NULL AND packets_received_diff IS NOT NULL ORDER BY time_bucket ASC`;break}case"describe":{o=`DESCRIBE ${S}`;break}default:o=`SELECT * FROM ${S} LIMIT 10`}l(`Preset query: ${e}`),u(`Running preset: ${e}`),q(a,o,r=>{if(r.$tag===1){const c=r._0;l(`Preset query returned ${A(c.rows.length,10)} rows`),u(`Completed: ${A(c.rows.length,10)} rows`),ee(c);return}else{const c=r._0,i=R(c);w(`Preset query failed: ${i}`),u(`Error: ${i}`),v('<div class="error">Error: (check console)</div>');return}});return}else{u("Error: No connection");return}}else{u("Please load parquet data first");return}else{u("Error: Database not initialized");return}}function se(){oe("duckdb.db",e=>{if(e.$tag===1){oe("duckdb.db-wal",t=>{if(t.$tag===1){K(!1),u("Cache purged. Reload the page to restart."),v(""),F(""),l("Cache purged");return}else{const a=t._0;w(`Failed to delete duckdb.db-wal: ${a}`),u("Cache purge failed (db-wal locked). Close other tabs and retry.");return}});return}else{const n=e._0;w(`Failed to delete duckdb.db: ${n}`),u("Cache purge failed (db locked). Close other tabs and retry.");return}})}function Xt(){l("Purging cache..."),u("Purging cache...");const e=P();if(e.$tag===1){const n=e._0;Ut(n,a=>{se()});return}else{se();return}}function xt(){Gt()}function Zt(){Kt()}function en(){Yt()}function tn(){Xt()}function nn(){Z()}function rn(e){Qt(e)}function on(e){Jt(e)}window.app={fetch_parquet:en||void 0||(()=>console.error("fetch_parquet not found")),run_sql_query:Zt||void 0||(()=>console.error("run_sql_query not found")),run_preset_query:rn||void 0||(()=>console.error("run_preset_query not found")),purge_cache:tn||void 0||(()=>console.error("purge_cache not found")),get_row_count:nn||void 0||(()=>console.error("get_row_count not found")),app_init:xt||void 0||(()=>console.error("app_init not found")),perform_search:on||void 0||(()=>console.error("perform_search not found"))};const ce=document.getElementById("search-input");ce&&ce.addEventListener("input",e=>{window.app.perform_search(e.target.value)});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.app.app_init()}):window.app.app_init();
