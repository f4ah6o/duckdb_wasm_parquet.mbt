(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const On="modulepreload",Ln=function(e){return"/"+e},ft={},oe=function(t,n,s){let r=Promise.resolve();if(n&&n.length>0){let $=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};var c=$;document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");r=$(n.map(d=>{if(d=Ln(d),d in ft)return;ft[d]=!0;const l=d.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":On,l||(h.as="script"),h.crossOrigin="",h.href=d,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((_,b)=>{h.addEventListener("load",_),h.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return r.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},Mn={$tag:0},Rn={$tag:1},In={$tag:2},Nn={$tag:3},Hn={$tag:4},Dn={$tag:5},jn={$tag:6},Pn={$tag:7},Fn={$tag:8},Bn={$tag:9},Vn={$tag:10},Un={$tag:11},zn={$tag:12},Wn={$tag:13},Gn={$tag:14},Yn={$tag:15},Xn={$tag:16},Jn={$tag:17},Kn={$tag:18},Qn={$tag:19},Zn={$tag:20},eo={$tag:21},to={$tag:22},no={$tag:23},oo={$tag:24},ro={$tag:25},so={$tag:26},co={$tag:27},io={$tag:28},ao={$tag:29},$o={$tag:30},uo={$tag:31},lo={$tag:32},_o={$tag:33},fo={$tag:34},ho={$tag:35},mo={$tag:36},bo={$tag:37},po={$tag:38},go={$tag:39};function We(e){this._0=e}We.prototype.$tag=40;class wo extends Error{}function R(){throw new wo}function V(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds")}const ko=()=>{if(globalThis.crypto?.getRandomValues){const e=new Uint32Array(1);return globalThis.crypto.getRandomValues(e),e[0]|0}else return Math.floor(Math.random()*4294967296)|0};function Ee(e){this._0=e}Ee.prototype.$tag=0;function Vt(e){this._0=e}Vt.prototype.$tag=1;function Ge(e){this._0=e}Ge.prototype.$tag=2;const xo={$tag:1},ht={$tag:0},yo=(e,t)=>e.toString(t);function Ye(e,t){const n=new Array(e);return n.fill(t),n}const le=(e,t)=>{e.push(t)},So=(e,t,n,s)=>{const r=u=>u&&u.message?u.message:String(u);let o=null,c=null;const i=(u,h)=>{if(u==null)return["",!0];if(typeof u=="string"){if(h!==null&&(h===o||h===c)){if(u==="NaN")return["nan",!1];if(u==="Infinity")return["inf",!1];if(u==="-Infinity")return["-inf",!1]}return[u,!1]}return typeof u=="number"?Number.isNaN(u)?["nan",!1]:u===1/0?["inf",!1]:u===-1/0?["-inf",!1]:[String(u),!1]:typeof u=="boolean"||typeof u=="bigint"?[String(u),!1]:[JSON.stringify(u),!1]},a=(u,h,_,b)=>{const p=[],g=[];for(let w=0;w<u.length;w++){const S=i(u[w],b?b[w]:null);p.push(S[0]),g.push(S[1])}h.push(p),_.push(g)},$=async()=>{const u=await oe(()=>import("./duckdb-node-api-xmTyaD0R.js"),[]);o=u.DuckDBTypeId.FLOAT,c=u.DuckDBTypeId.DOUBLE;const h=await e.connection.run(t),_=h.columnNames(),b=await h.getRowsJson(),p=_.map((S,L)=>h.columnTypeId(L)),g=[],w=[];for(const S of b){const L=Array.isArray(S)?S:_.map(E=>S[E]);a(L,g,w,p)}n(_,g,w,p)},d=async()=>{const u=await e.conn.query(t);let h=[];u&&u.schema&&u.schema.fields&&(h=u.schema.fields.map(w=>w.name));const _=u.toArray().map(w=>w.toJSON());h.length===0&&_.length>0&&(h=Object.keys(_[0]));const b=[],p=[];for(const w of _){const S=h.map(L=>w[L]);a(S,b,p,null)}n(h,b,p,[])};(async()=>{if(e&&e.kind==="node"){await $();return}if(e&&e.kind==="wasm"){await d();return}throw new Error("unknown connection backend")})().catch(u=>s(r(u)))},vo=(e,t,n)=>{const s=o=>o&&o.message?o.message:String(o);(async()=>{if(e&&e.kind==="node"){e.connection&&typeof e.connection.closeSync=="function"&&e.connection.closeSync(),e.instance&&typeof e.instance.close=="function"&&await e.instance.close(),t();return}if(e&&e.kind==="wasm"){e.conn&&typeof e.conn.close=="function"&&await e.conn.close(),e.db&&typeof e.db.terminate=="function"&&await e.db.terminate(),e.worker&&typeof e.worker.terminate=="function"&&e.worker.terminate(),t();return}throw new Error("unknown connection backend")})().catch(o=>n(s(o)))};function Ut(e){this._0=e}Ut.prototype.$tag=0;function zt(e){this._0=e}zt.prototype.$tag=1;function Wt(e){this._0=e}Wt.prototype.$tag=0;function Gt(e){this._0=e}Gt.prototype.$tag=1;const se=(e,t,n)=>e[t](...n),Yt=e=>e==null,mt=(e,t,n)=>{e[t]=n},bt=()=>({}),Eo=e=>Object.fromEntries(e.map(t=>[t._0,t._1])),Ao=e=>Array.from(e),_e={$tag:0};function P(e){this._0=e}P.prototype.$tag=1;const Te=e=>e.preventDefault(),Oe=e=>e.tagName,De=()=>document,To=(e,t)=>{const n=e&&e.$tag===1?e._0:null,s=(l,u)=>l?l.getAttribute(u)||l.getAttribute("data-"+u):null,r=(l,u,h)=>{let _=u?u.trim():"",b=h;if(_==="unset")return null;_.indexOf("javascript:")===0?(_=_.slice(11),b=!0):_.indexOf("js:")===0&&(_=_.slice(3),b=!0),_.indexOf("{")!==0&&(_="{"+_+"}");let p;if(b){if(!(window.htmx&&window.htmx.config&&window.htmx.config.allowEval!==!1)){const w=new CustomEvent("htmx:evalDisallowedError",{bubbles:!0,cancelable:!0,detail:{source:"hx-vars"}});return l.dispatchEvent(w),{}}try{if(t){const w=t&&t.$tag===1?t._0:t;p=new Function("event","return ("+_+")").call(l,w)}else p=new Function("return ("+_+")").call(l)}catch(w){return console.error("htmx.mbt: Error evaluating vars:",w),{}}}else try{p=JSON.parse(_)}catch(g){return console.error("htmx.mbt: Error parsing vars JSON:",g),{}}return p||{}},o=(l,u,h,_,b)=>{if(_==null&&(_={}),l==null)return _;const p=s(l,u);if(p){let w=p.trim(),S=h;if(w==="unset")return null;w.indexOf("javascript:")===0?(w=w.slice(11),S=!0):w.indexOf("js:")===0&&(w=w.slice(3),S=!0),w.indexOf("{")!==0&&(w="{"+w+"}");let L;S?L=r(l,w,!0):L=r(l,w,!1);for(const E in L)L.hasOwnProperty(E)&&_[E]==null&&(_[E]=L[E])}const g=l.parentElement;return g?o(g,u,h,_):_};let c={},i={};n&&(c=o(n,"hx-vars",!0,{})||{},i=o(n,"hx-vals",!1,{})||{});const a={...c,...i},$=Object.entries(a),d=[];for(const[l,u]of $)d.push({_0:l,_1:String(u)});return{buf:d,start:0,end:d.length}},Se=e=>e,Co=e=>e.reportValidity?e.reportValidity():!0,qo=e=>e.checkValidity?e.checkValidity():!0,Oo=e=>e.hasAttribute("novalidate"),Lo=e=>e.hasAttribute("hx-validate")||e.hasAttribute("data-hx-validate"),Mo=e=>{const t=e.querySelectorAll("input, select, textarea");for(let n=0;n<t.length;n++){const s=new CustomEvent("htmx:validation:validate",{bubbles:!0,cancelable:!0});t[n].dispatchEvent(s)}},Ro=e=>{const t=new CustomEvent("htmx:validation:validate",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)},Io=e=>{if(!e.querySelectorAll)return[];const t=[],n=e.querySelectorAll("input, select, textarea");for(let s=0;s<n.length;s++)n[s].checkValidity&&!n[s].checkValidity()&&t.push(n[s]);return t},No=(e,t)=>{const n=new CustomEvent("htmx:validation:failed",{bubbles:!0,cancelable:!0,detail:t});return e.dispatchEvent(n)},Ho=(e,t)=>{const n=new CustomEvent("htmx:validation:halted",{bubbles:!0,cancelable:!0,detail:{errors:t}});e.dispatchEvent(n)},Do=e=>{e.focus&&e.focus()},jo=e=>e.map(t=>({elt:t,message:t.validationMessage||"",validity:t.validity||{}})),Po=()=>window.htmx&&window.htmx.config&&window.htmx.config.reportValidityOfForms===!0,Fo=e=>{try{return e&&(e.hasAttribute("formnovalidate")||e.formnovalidate===!0)}catch{return!1}},Xt=(e,t,n,s,r)=>{const o=new XMLHttpRequest;o.open(t,e,!0);const c=s;for(const[i,a]of Object.entries(c))o.setRequestHeader(i,a);o.onload=function(){o.status>=200&&o.status<300?r(o.responseText||""):r(null)},o.onerror=function(){r(null)},o.send()},Bo=(e,t,n,s,r,o)=>{const c=new XMLHttpRequest;c.open(t,e,!0);const i=r;for(const[$,d]of Object.entries(i))c.setRequestHeader($,d);c.onload=function(){c.status>=200&&c.status<300?o(c.responseText||""):o(null)},c.onerror=function(){o(null)};let a=n;if(n&&typeof n.append=="function"){const $=[];for(const[d,l]of n.entries())$.push(encodeURIComponent(d)+"="+encodeURIComponent(l));a=$.join("&")}c.send(a)},Jt=e=>{const t={};if(e&&e.buf)for(let n=e.start||0;n<(e.end||e.buf.length);n++){const s=e.buf[n];s&&s._0!==void 0&&(t[s._0]=s._1)}return t},G=e=>console.log("[htmx.mbt DEBUG] "+e),Vo=(e,t)=>{if(t&&t.buf)for(let n=t.start||0;n<(t.end||t.buf.length);n++){const s=t.buf[n];if(s&&s._0!==void 0){const r=s._0,o=s._1;e.delete(r),e.append(r,o)}}},pt=(e,t)=>{let n=[];if(t&&t.buf)for(let r=t.start||0;r<(t.end||t.buf.length);r++){const o=t.buf[r];if(o&&o._0!==void 0){const c=encodeURIComponent(o._0),i=encodeURIComponent(o._1);n.push(c+"="+i)}}if(n.length===0)return e;const s=e.includes("?")?"&":"?";return e+s+n.join("&")},Uo=e=>!!e.checked,gt=e=>e.value||"",zo=(e,t)=>{const n=new FormData,s=e.tagName.toUpperCase();if(s==="INPUT"||s==="SELECT"||s==="TEXTAREA"){const o=e.getAttribute("name");if(o&&o.length>0){let c=null;if(s==="INPUT"){const i=e.getAttribute("type")||"text";i==="checkbox"||i==="radio"?e.checked&&(c=e.value||"on"):i!=="file"&&(c=e.value||"")}else c=e.value||"";c!==null&&n.append(o,c)}}const r=e.querySelectorAll("input, select, textarea");for(const o of r){const c=o.getAttribute("name");if(c&&c.length>0){let i=null;const a=o.tagName.toUpperCase();if(a==="INPUT"){const $=o.getAttribute("type")||"text";if($==="checkbox"||$==="radio")o.checked&&(i=o.value||"on");else{if($==="file")continue;i=o.value||""}}else(a==="SELECT"||a==="TEXTAREA")&&(i=o.value||"");i!==null&&n.append(c,i)}}if(t&&t.buf)for(let o=t.start||0;o<(t.end||t.buf.length);o++){const c=t.buf[o];if(c&&c._0!==void 0){const i=c._0,a=c._1;n.delete(i),n.append(i,a)}}return n},Wo=(e,t,n,s,r,o)=>function(c){if(o.length>0)for(const i of o){const $=i["htmx-internal-data"];$&&($.indicatorCount=($.indicatorCount||1)-1),($&&$.indicatorCount||0)===0&&i.classList.remove("htmx-request")}if(r.length>0)for(const i of r){const $=i["htmx-internal-data"];$&&($.requestCount=($.requestCount||1)-1),($&&$.requestCount||0)===0&&i.removeAttribute("disabled")}if(c!==null){const i=window.htmx||{},a=i.config||{},$=e.getAttribute("hx-select")||e.getAttribute("data-hx-select"),d=i._?i._("getSwapSpecification"):null,l=d?d(e):null,u=typeof a.defaultSwapStyle=="string"?a.defaultSwapStyle:"innerHTML",h=n&&typeof n=="string"?n:l&&typeof l.swapStyle=="string"?l.swapStyle:u,_=l&&typeof l.swapDelay=="number"?l.swapDelay:0,b=l&&typeof l.settleDelay=="number"?l.settleDelay:typeof a.defaultSettleDelay=="number"?a.defaultSettleDelay:0,p=l&&l.transition===!0,g=l?l.scroll:null,w=l?l.show:null,S=a.allowNestedOobSwaps!==!1,E=new Set(["innerHTML","outerHTML","beforebegin","afterbegin","beforeend","afterend","delete","none","morph","textContent"]).has(h)?h:u,f=new DOMParser;let M=c,v=null;if(E!=="textContent"){let y=f.parseFromString(c,"text/html");if($){const x=y.querySelector($);M=x?x.outerHTML:"",y=f.parseFromString(M,"text/html")}else M=y.body.innerHTML;v=y;const F=e&&e.getRootNode?e.getRootNode():document,z=F&&F.querySelectorAll?F:document,fe=x=>{x.removeAttribute("hx-swap-oob"),x.removeAttribute("data-hx-swap-oob")},te=x=>x?window.CSS&&CSS.escape?"#"+CSS.escape(x):'[id="'+String(x).replace(/"/g,'\\"')+'"]':null,ne=x=>["innerHTML","outerHTML","beforebegin","afterbegin","beforeend","afterend","delete","none","morph"].includes(x)?x:"innerHTML",Me=x=>{const D=x.getAttribute("hx-swap-oob")||x.getAttribute("data-hx-swap-oob")||"true";let N="innerHTML",j=null;if(D==="true")N="outerHTML",j=te(x.getAttribute("id"));else if(D.includes(":")){const W=D.split(":");N=W[0]||"innerHTML",j=W.slice(1).join(":")}else N=D,j=te(x.getAttribute("id"));let J=!1;if(j){const W=j.trim();W.startsWith("global ")?(J=!0,j=W.slice(7).trim()):W==="global"?(J=!0,j=null):j=W}return{swapStyle:ne(N),targetSelector:j,isGlobal:J}},he=x=>{if(!x.targetSelector)return[];const D=x.isGlobal?document:z;if(!D||!D.querySelectorAll)return[];try{return Array.from(D.querySelectorAll(x.targetSelector))}catch{return[]}},En=(x,D,N,j)=>{switch(D.swapStyle){case"innerHTML":x.innerHTML=N;break;case"outerHTML":x.outerHTML=j;break;case"beforebegin":x.insertAdjacentHTML("beforebegin",j);break;case"afterbegin":x.insertAdjacentHTML("afterbegin",N);break;case"beforeend":x.insertAdjacentHTML("beforeend",N);break;case"afterend":x.insertAdjacentHTML("afterend",j);break;case"delete":x.remove();break;case"none":break;default:x.innerHTML=N;break}},dt=(x,D)=>{const N=x.parentElement;if(!D&&!S&&N&&N!==v.body&&N.tagName!=="BODY"){fe(x);return}const J=Me(x),W=he(J);if(J.swapStyle==="delete"){for(const me of W)me.remove();x.remove();return}if(fe(x),W.length===0){if(J.targetSelector){const me=new CustomEvent("htmx:oobErrorNoTarget",{bubbles:!0,cancelable:!0,detail:{content:x}});document.body.dispatchEvent(me)}x.remove();return}const Cn=x.innerHTML,qn=x.outerHTML;for(const me of W)En(me,J,Cn,qn);x.remove()},An=v.querySelectorAll("template");for(const x of An){const D=x.content;if(!D)continue;const N=D.querySelectorAll("[hx-swap-oob], [data-hx-swap-oob]");if(N.length!==0){for(const j of N)dt(j,!0);x.remove()}}const Tn=v.querySelectorAll("[hx-swap-oob], [data-hx-swap-oob]");for(const x of Tn)dt(x,!1);M=v.body.innerHTML}const m=y=>{const F=new CustomEvent("htmx:swapError",{bubbles:!0,cancelable:!0,detail:{error:y}});document.body.dispatchEvent(F)},H=y=>{switch(E){case"innerHTML":t.innerHTML=y;break;case"outerHTML":t.tagName&&t.tagName.toUpperCase()==="BODY"?t.innerHTML=y:t.outerHTML=y;break;case"beforebegin":t.insertAdjacentHTML("beforebegin",y);break;case"afterbegin":t.insertAdjacentHTML("afterbegin",y);break;case"beforeend":t.insertAdjacentHTML("beforeend",y);break;case"afterend":t.insertAdjacentHTML("afterend",y);break;case"delete":t.remove();break;case"none":break;case"textContent":t.textContent=y;break;case"morph":t.innerHTML=y;break;default:t.innerHTML=y;break}},k=y=>y?!y.target||y.target==="window"?document.body:document.querySelector(y.target):null,T=()=>{if(g&&g.direction){const y=k(g);y&&(g.direction==="top"?y===document.body?window.scrollTo(0,0):y.scrollTop=0:g.direction==="bottom"&&(y===document.body?window.scrollTo(0,document.body.scrollHeight):y.scrollTop=y.scrollHeight))}if(w&&w.direction){const y=k(w);if(y&&typeof y.scrollIntoView=="function"){const F=w.direction==="bottom"?"end":"start";y.scrollIntoView({block:F})}}},Y=()=>{try{typeof window.makeSettleInfo=="function"&&window.makeSettleInfo(t),H(M)}catch(F){m(F);return}if(window.htmx&&window.htmx.config&&window.htmx.config.allowEval!==!1){window.htmx._internal||(window.htmx._internal={}),window.htmx._internal.loadedScripts||(window.htmx._internal.loadedScripts=new Set);const F=t.querySelectorAll("script");for(const z of F){const fe=z.getAttribute("type");if(!fe||fe==="text/javascript"){const te=z.getAttribute("src");if(te){if(window.htmx._internal.loadedScripts.has(te)){z.remove();continue}const ne=document.createElement("script");ne.src=te;const Me=["id","nonce","referrerpolicy","type","async","defer","crossorigin"];for(const he of Me)z.hasAttribute(he)&&ne.setAttribute(he,z.getAttribute(he));window.htmx._internal.loadedScripts.add(te),z.replaceWith(ne)}else if(z.textContent){try{new Function(z.textContent)()}catch(ne){console.error("htmx.mbt: Error executing script:",ne)}z.remove()}}}}const y=e.getAttribute("hx-push-url")||e.getAttribute("data-hx-push-url");if(y&&y!=="false"){const F=y==="true"?s:y;if(history.pushState(null,"",F),window.htmx&&window.htmx._&&typeof window.htmx._=="function")try{window.htmx._("saveToHistoryCache")(F,t)}catch{}}b>0?setTimeout(T,b):T()};_>0||p?setTimeout(Y,_):Y()}},Go=e=>{const t="htmx-internal-data";let n=e[t];n||(n={},e[t]=n),n.requestCount=(n.requestCount||0)+1},Yo=e=>e.setAttribute("disabled","disabled"),Le=(e,t)=>e.matches(t),Kt=e=>{const t=e.nextElementSibling;return t?{$tag:1,_0:t}:{$tag:0}},Qt=e=>{const t=e.previousElementSibling;return t?{$tag:1,_0:t}:{$tag:0}},C=e=>console.log("[htmx.mbt ATTR DEBUG] "+e),be=(e,t)=>e.substring(t),je=e=>e.trim(),ie=e=>e.split(",").map(t=>t.trim()),wt=e=>new FormData(e),Xo={$tag:0};function ge(e){this._0=e}ge.prototype.$tag=1;const Xe=e=>e.filter(t=>t!=="").join(", "),Je=e=>{const t=e.parentElement;return t?{$tag:1,_0:t}:{$tag:0}},Jo=(e,t)=>!e||!Array.isArray(e)?!1:e.includes(t),Ko=e=>!e||!Array.isArray(e)?!1:e.includes("*"),Qo=e=>!e||e==="*"?["*"]:e.split(/\s+/).filter(t=>t.length>0),Zo=()=>{try{return window.htmx&&window.htmx.config&&window.htmx.config.disableInheritance===!0}catch{return!1}},er=e=>e.classList.add("htmx-request"),tr=e=>{const t="htmx-internal-data";let n=e[t];n||(n={},e[t]=n),n.indicatorCount=(n.indicatorCount||0)+1},kt=e=>encodeURIComponent(e),nr={$tag:0},Ke=e=>{if(e&&typeof e.composedPath=="function"){const t=e.composedPath();if(t&&t.length>0&&t[0]&&t[0].nodeType===1)return t[0]}return e.target},or=e=>e&&e.tagName==="BUTTON"&&(e.type==="submit"||!e.type),rr=e=>e.form||e.closest("form"),sr=e=>!!(e.form||e.closest("form")),cr=e=>e.submitter||null,ir=()=>{const e=document,t=r=>{const o=r.getAttribute("hx-trigger")||r.getAttribute("data-hx-trigger");if(o){const c=o.split(",").map(i=>i.trim());for(const i of c)if(i==="load"||i.startsWith("load ")){const a=new MouseEvent("click",{bubbles:!0,cancelable:!0});r.dispatchEvent(a);break}}},n=e.querySelectorAll("[hx-trigger], [data-hx-trigger]");for(const r of n)t(r);new MutationObserver(r=>{for(const o of r)for(const c of o.addedNodes)if(c.nodeType===1){c.getAttribute&&(c.getAttribute("hx-trigger")||c.getAttribute("data-hx-trigger"))&&t(c);const i=c.querySelectorAll("[hx-trigger], [data-hx-trigger]");for(const a of i)t(a)}}).observe(e.body,{childList:!0,subtree:!0})},ar=e=>{const t=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","keydown","keyup","keypress","change","input","submit","focus","blur","load","revealed","htmx:config-request","htmx:after-request","htmx:before-request","htmx:before-swap","htmx:after-swap","htmx:before-settle","htmx:after-settle","htmx:validation:failed","htmx:validation:halted","htmx:evalDisallowedError"],n=function(s){const r=s.type;let o=s.target;for(;o&&o!==document;){const c=o.attributes;for(let i=0;i<c.length;i++){const a=c[i].name;let $=null;if(a.startsWith("hx-on:")||a.startsWith("hx-on-")?$=a.slice(6):(a.startsWith("data-hx-on:")||a.startsWith("data-hx-on-"))&&($=a.slice(11)),$!==null&&(($.startsWith("::")||$.startsWith("--"))&&($="htmx:"+$.slice(2)),$===r)){const d=c[i].value;if(window.htmx&&window.htmx.config&&window.htmx.config.allowEval===!1){const h=new CustomEvent("htmx:evalDisallowedError",{bubbles:!0,cancelable:!0,detail:{source:"hx-on"}});o.dispatchEvent(h);return}const l="htmx-internal-data";let u=o[l];if(u||(u={},o[l]=u),u.hxOnHandlers||(u.hxOnHandlers={}),!u.hxOnHandlers[r])try{u.hxOnHandlers[r]=new Function("event",d)}catch(h){console.error("htmx.mbt: Error creating hx-on handler:",h);return}try{u.hxOnHandlers[r].call(o,s)}catch(h){console.error("htmx.mbt: Error executing hx-on handler:",h)}return}}o=o.parentElement}};for(const s of t)e.addEventListener(s,n,{capture:!1})},$r=(e,t)=>{(async()=>{try{if(!navigator.storage||!navigator.storage.getDirectory){e(!1);return}await navigator.storage.getDirectory(),e(!0)}catch{e(!1)}})().catch(s=>t(s.message||String(s)))};function Zt(e){this._0=e}Zt.prototype.$tag=0;function en(e){this._0=e}en.prototype.$tag=1;const ur=(e,t,n)=>{const s=o=>o&&o.message?o.message:String(o);(async()=>{if(typeof Worker>"u")throw new Error("duckdb-wasm requires Worker support");const o=await oe(()=>import("./duckdb-browser-odMagBQf.js"),[]),{default:c}=await oe(async()=>{const{default:f}=await import("./duckdb-mvp-B8n9RrPO.js");return{default:f}},[]),{default:i}=await oe(async()=>{const{default:f}=await import("./duckdb-browser-mvp.worker-ZlAJ-lVK.js");return{default:f}},[]),{default:a}=await oe(async()=>{const{default:f}=await import("./duckdb-eh-BB_VBLaS.js");return{default:f}},[]),{default:$}=await oe(async()=>{const{default:f}=await import("./duckdb-browser-eh.worker-Bef-XVGK.js");return{default:f}},[]),d={mvp:{mainModule:c,mainWorker:i},eh:{mainModule:a,mainWorker:$}},l=await o.selectBundle(d),u=new o.ConsoleLogger(o.LogLevel.WARNING);if(!l.mainWorker)throw new Error("duckdb-wasm bundle missing mainWorker");const h=new Worker(l.mainWorker),_=new o.AsyncDuckDB(u,h);await _.instantiate(l.mainModule,l.pthreadWorker);const b=f=>{window.__duckdb_storage=f},p=f=>{window.__duckdb_storage_name=f},g=async()=>{await _.open({query:{castBigIntToDouble:!0}}),b("memory"),p(":memory:")},w=async f=>{const M=f.startsWith("opfs://")?f:`opfs://${f}`;await _.open({path:M,accessMode:3,opfs:{fileHandling:"auto"},query:{castBigIntToDouble:!0}}),b("opfs"),p(f)},S=f=>f.includes("not a valid DuckDB database file")||f.includes("Access Handles cannot be created")||f.includes("createSyncAccessHandle"),L=f=>{const M=`${Date.now()}-${Math.random().toString(16).slice(2)}`;return f.endsWith(".db")?`${f.slice(0,-3)}-${M}.db`:`${f}-${M}`};if(e&&e!==":memory:")try{await navigator.storage.getDirectory(),await w(e)}catch(f){const M=s(f);if(S(M))try{await w(L(e))}catch(v){console.warn("OPFS retry failed, using in-memory database:",v),await g()}else console.warn("OPFS not available, using in-memory database:",f),await g()}else await g();const E=await _.connect();t({kind:"wasm",db:_,conn:E,worker:h})})().catch(o=>n(s(o)))};function tn(e){this._0=e}tn.prototype.$tag=0;function nn(e){this._0=e}nn.prototype.$tag=1;const lr=(e,t,n,s,r)=>{(async()=>{if(!e||e.kind!=="wasm"||!e.db)throw new Error("Connection must be a WASM connection");const c=await oe(()=>import("./duckdb-browser-odMagBQf.js"),[]);await e.db.registerFileURL(t,n,c.DuckDBDataProtocol.HTTP,!1),s()})().catch(c=>r(c.message||String(c)))};function Qe(e){this._0=e}Qe.prototype.$tag=0;function Ze(e){this._0=e}Ze.prototype.$tag=1;const _r=(e,t,n)=>{(async()=>{const r=await navigator.storage.getDirectory();try{await r.removeEntry(e)}catch(o){if(o.name!=="NotFoundError")throw o}t()})().catch(r=>n(r.message||String(r)))},on=e=>{window.__duckdb_conn=e},de=()=>{const e=window.__duckdb_conn;return e?{$tag:1,_0:e}:{$tag:0}},ke=()=>!!window.__duckdb_conn,et=e=>{window.__parquet_loaded=e},tt=()=>!!window.__parquet_loaded,rn=()=>window.__duckdb_storage||"unknown",sn=()=>window.__duckdb_storage_name||"",q=e=>console.log("[app] "+e),U=e=>console.error("[app] "+e),cn=()=>"https://duckdb-wasm-mbt.f12o.com/P78BHZM3MD3MV47JDZG47PB8PW.parquet",nt=(e,t)=>{const n=document.querySelector(e);n&&(n.innerHTML=t)},ae=(e,t)=>{const n=document.querySelector(e);n&&(n.disabled=t)},dr=()=>{const e=document.querySelector("#sql-input");return e?e.value:""},an={method_0:I,method_1:rt,method_2:ce,method_3:Z},fr=0,hr=0,mr=new We(-1),xt="?",yt="global ",St="closest ",vt="find ",Et="next",At="previous",Tt="inherit",Ct="&",qt=" ",br=0,pr=1,gr=2,wr=3,kr=4,xr={_0:"HX-Request",_1:"true"},yr=[xr],Q="stats",Sr=ko();function vr(e){return R()}function Er(e){return R()}function Ar(e,t){const n=(e.acc>>>0)+((Math.imul(t,-1028477379)|0)>>>0)|0,s=17;e.acc=Math.imul(n<<s|(n>>>(32-s|0)|0),668265263)|0}function Tr(e,t){e.acc=(e.acc>>>0)+4|0,Ar(e,t)}function Cr(e,t){return vr(`${e}
  at ${ln(t)}
`)}function qr(e,t){return Er(`${e}
  at ${ln(t)}
`)}function X(e){return{val:""}}function Z(e,t){const n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function ot(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function Pe(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function $n(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Or(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Lr(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Mr(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Rr(e,t){const n=e.length;return t<n?(V(e,t),e[t]):R()}function Ir(e){const t={str:e,start:0,end:e.length},n=t.str,s=t.start,r=s+(t.end-t.start|0)|0;let o=s,c=-1,i=-1,a=-1,$=-1,d=-1,l=-1,u=-1,h=-1,_=-1,b=-1,p=-1,g=-1,w=-1,S=-1,L=-1;t:{let E;e:if(o<r){const M=o,v=n.charCodeAt(M);if(o=o+1|0,v<65){if(v<64)break t;for(;;)if(h=o,o<r){o:{const m=o,H=n.charCodeAt(m);if(o=o+1|0,H<55296){if(H<58)break o;if(H>58)break o;if(o<r){s:{const k=o,T=n.charCodeAt(k);if(o=o+1|0,T<56319){if(T<55296)break s;E=7;break e}else if(T>56319){if(T<65536)break s;break t}else{E=8;break e}}E=0;break e}else break t}else if(H>56318)if(H<57344)if(o<r){const k=o,T=n.charCodeAt(k);if(o=o+1|0,T<56320)break t;if(T>57343)break t;continue}else break t;else{if(H>65535)break t;break o}else if(o<r){const k=o,T=n.charCodeAt(k);if(o=o+1|0,T<56320)break t;if(T>65535)break t;continue}else break t}continue}else break t}else break t}else break t;let f=E;e:for(;;){const M=f;o:{s:switch(M){case 3:if(p=b,b=_,_=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296)if(m<58){if(m<48)break n;if(_=o,S=w,w=o,g=o,o<r){r:{const H=o,k=n.charCodeAt(H);if(o=o+1|0,k<59)if(k<46){if(k<45)break r;break o}else if(k>47)if(k<58){f=6;continue e}else{f=3;continue e}else break r;else if(k>55295)if(k<57344)if(k<56319){f=7;continue e}else{f=8;continue e}else{if(k>65535)break t;break r}else break r}f=0;continue e}else break t}else{if(m>58)break n;f=1;continue e}else if(m>56318)if(m<57344){f=8;continue e}else{if(m>65535)break t;break n}else{f=7;continue e}}f=0;continue e}else break t;case 2:if(_=o,w=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296)if(m<58){if(m<48)break n;f=2;continue e}else{if(m>58)break n;f=3;continue e}else if(m>56318)if(m<57344){f=8;continue e}else{if(m>65535)break t;break n}else{f=7;continue e}}f=0;continue e}else break t;case 0:if(_=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296){if(m<58)break n;if(m>58)break n;f=1;continue e}else if(m>56318)if(m<57344){f=8;continue e}else{if(m>65535)break t;break n}else{f=7;continue e}}f=0;continue e}else break t;case 8:if(o<r){const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<56320)break t;if(m>57343)break t;f=0;continue e}else break t;case 4:if(_=o,L=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296)if(m<58){if(m<48)break n;f=4;continue e}else{if(m>58)break n;if(p=b,b=_,_=o,o<r){r:{const H=o,k=n.charCodeAt(H);if(o=o+1|0,k<55296)if(k<58){if(k<48)break r;if(_=o,S=w,w=o,o<r){c:{const T=o,Y=n.charCodeAt(T);if(o=o+1|0,Y<55296)if(Y<58){if(Y<48)break c;f=5;continue e}else{if(Y>58)break c;f=3;continue e}else if(Y>56318)if(Y<57344){f=8;continue e}else{if(Y>65535)break t;break c}else{f=7;continue e}}f=0;continue e}else break s}else{if(k>58)break r;f=1;continue e}else if(k>56318)if(k<57344){f=8;continue e}else{if(k>65535)break t;break r}else{f=7;continue e}}f=0;continue e}else break t}else if(m>56318)if(m<57344){f=8;continue e}else{if(m>65535)break t;break n}else{f=7;continue e}}f=0;continue e}else break t;case 5:if(_=o,w=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296)if(m<58){if(m<48)break n;f=5;continue e}else{if(m>58)break n;f=3;continue e}else if(m>56318)if(m<57344){f=8;continue e}else{if(m>65535)break t;break n}else{f=7;continue e}}f=0;continue e}else break s;case 6:if(_=o,w=o,g=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<59)if(m<46){if(m<45)break n;break o}else if(m>47)if(m<58){f=6;continue e}else{f=3;continue e}else break n;else if(m>55295)if(m<57344)if(m<56319){f=7;continue e}else{f=8;continue e}else{if(m>65535)break t;break n}else break n}f=0;continue e}else break t;case 7:if(o<r){const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<56320)break t;if(m>65535)break t;f=0;continue e}else break t;case 1:if(b=_,_=o,o<r){n:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296)if(m<58){if(m<48)break n;f=2;continue e}else{if(m>58)break n;f=1;continue e}else if(m>56318)if(m<57344){f=8;continue e}else{if(m>65535)break t;break n}else{f=7;continue e}}f=0;continue e}else break t;default:break t}_=p,w=S,a=h,$=_,d=w,l=g,u=L,c=0,i=o;break t}if(b=p,_=o,w=S,o<r){o:{const v=o,m=n.charCodeAt(v);if(o=o+1|0,m<55296)if(m<58){if(m<48)break o;f=4;continue}else{if(m>58)break o;f=1;continue}else if(m>56318)if(m<57344){f=8;continue}else{if(m>65535)break t;break o}else{f=7;continue}}f=0;continue}else break t}}if(c===0){let E;t:{e:{const k=K(n,$+1|0,d);if(k.$tag===1)E=k._0;else{k._0;break e}break t}E=R()}let f;t:{e:{const k=K(n,d+1|0,l);if(k.$tag===1)f=k._0;else{k._0;break e}break t}f=R()}let M;t:{e:{const k=K(n,s+1|0,a);if(k.$tag===1)M=k._0;else{k._0;break e}break t}M=R()}let v;t:{e:{const k=K(n,a+1|0,$);if(k.$tag===1)v=k._0;else{k._0;break e}break t}v=R()}let m;t:{e:{const k=K(n,l+1|0,u);if(k.$tag===1)m=k._0;else{k._0;break e}break t}m=R()}let H;t:{e:{const k=K(n,u+1|0,i);if(k.$tag===1)H=k._0;else{k._0;break e}break t}H=R()}return{pkg:M,filename:v,start_line:E,start_column:f,end_line:m,end_column:H}}else return R()}function I(e,t){const n=e;n.val=`${n.val}${t}`}function Nr(e,t){ls(t,e)}function Hr(e){let t=e.acc;return t=t^(t>>>15|0),t=Math.imul(t,-2048144777)|0,t=t^(t>>>13|0),t=Math.imul(t,-1028477379)|0,t=t^(t>>>16|0),t}function Dr(e){return Hr(e)}function jr(e){return{acc:(e>>>0)+374761393|0}}function Pr(e){let t;return t=Sr,jr(t)}function Fr(e){const t=Pr();return Nr(t,e),Dr(t)}function un(e,t,n){const s=e.length;let r;if(n===void 0)r=s;else{const i=n;r=i<0?s+i|0:i}const o=t<0?s+t|0:t;if(o>=0&&o<=r&&r<=s){let c;if(o<s){const a=e.charCodeAt(o);c=56320<=a&&a<=57343}else c=!1;if(c)return new Ee(ht);let i;if(r<s){const a=e.charCodeAt(r);i=56320<=a&&a<=57343}else i=!1;return i?new Ee(ht):new Vt({str:e,start:o,end:r})}else return new Ee(xo)}function K(e,t,n){let s;return t===void 0?s=0:s=t,un(e,s,n)}function rt(e,t,n,s){let r;t:{e:{const o=un(t,n,n+s|0);if(o.$tag===1)r=o._0;else{o._0;break e}break t}r=R()}ce(e,r)}function Br(e){const t=X(),n={self:t,method_table:an};return e?n.method_table.method_0(n.self,"true"):n.method_table.method_0(n.self,"false"),t.val}function ln(e){const t=X();return ds(e,{self:t,method_table:an}),t.val}function B(e,t){return yo(e,t)}function Vr(e){return e.str.substring(e.start,e.end)}function _n(e){const t=e.start,n=e.end,s={val:t};return()=>{if(s.val<n){const o=e.str,c=s.val,i=o.charCodeAt(c);if(55296<=i&&i<=56319&&(s.val+1|0)<e.end){const a=e.str,$=s.val+1|0,d=a.charCodeAt($);if(56320<=d&&d<=57343)return s.val=s.val+2|0,ot(i,d)}return s.val=s.val+1|0,i}else return-1}}function Ur(e){const t=e.start,n=e.end,s={val:t},r={val:0};return()=>{if(s.val<n){const o=e.str,c=s.val,i=o.charCodeAt(c);if(55296<=i&&i<=56319&&(s.val+1|0)<e.end){const $=e.str,d=s.val+1|0,l=$.charCodeAt(d);if(56320<=l&&l<=57343){const u={_0:r.val,_1:ot(i,l)};return s.val=s.val+2|0,r.val=r.val+1|0,u}}const a={_0:r.val,_1:i};return s.val=s.val+1|0,r.val=r.val+1|0,a}else return}}function Ce(e,t,n){let s;return n===void 0?s=e.length:s=n,t>=0&&t<=s&&s<=e.length?{str:e,start:t,end:s}:qr("Invalid index for View","@moonbitlang/core/builtin:stringview.mbt:382:5-382:36")}function zr(e){const t=X(Math.imul(e.end-e.start|0,4)|0),n=e.end-e.start|0;let s=0;for(;;){const r=s;if(r<n){const o=e.buf[e.start+r|0];Z(t,o),s=r+1|0;continue}else break}return t.val}function Wr(e,t,n,s){let r;s===void 0?r=e.length:r=s;let o=n,c=0;for(;;)return c===t&&o===r}function ce(e,t){const n=e;n.val=`${n.val}${Vr(t)}`}function Gr(e,t){const n=e.end-e.start|0,s=t.end-t.start|0;if(s>0)if(n>=s){const r=Ye(256,s),o=s-1|0;let c=0;for(;;){const a=c;if(a<o){const $=t.str,d=t.start+a|0,l=$.charCodeAt(d)&255;V(r,l),r[l]=(s-1|0)-a|0,c=a+1|0;continue}else break}let i=0;for(;;){const a=i;if(a<=(n-s|0)){const $=s-1|0;let d=0;for(;;){const b=d;if(b<=$){const p=a+b|0,g=e.str,w=e.start+p|0,S=g.charCodeAt(w),L=t.str,E=t.start+b|0;if(S!==L.charCodeAt(E))break;d=b+1|0;continue}else return a}const l=(a+s|0)-1|0,u=e.str,h=e.start+l|0,_=u.charCodeAt(h)&255;V(r,_),i=a+r[_]|0;continue}else break}return}else return;else return fr}function Yr(e,t){const n=e.end-e.start|0,s=t.end-t.start|0;if(s>0)if(n>=s){const o=t.str,c=t.start+0|0,i=o.charCodeAt(c),a=n-s|0;let $=0;for(;$<=a;){for(;;){let d;if($<=a){const l=$,u=e.str,h=e.start+l|0;d=u.charCodeAt(h)!==i}else d=!1;if(d){$=$+1|0;continue}else break}if($<=a){let d=1;for(;;){const l=d;if(l<s){const u=$+l|0,h=e.str,_=e.start+u|0,b=h.charCodeAt(_),p=t.str,g=t.start+l|0;if(b!==p.charCodeAt(g))break;d=l+1|0;continue}else return $}$=$+1|0}continue}return}else return;else return hr}function dn(e,t){return(t.end-t.start|0)<=4?Yr(e,t):Gr(e,t)}function Xr(e,t){const n=Ur(e);for(;;){const s=$s(n);if(s===void 0)break;{const o=s,c=o._0,i=o._1;if(t(i))return c;continue}}}function fn(e,t){return Xr({str:e,start:0,end:e.length},t)}function Jr(e,t){const n=dn(e,t);return n===void 0?!1:n===0}function pe(e,t){return Jr({str:e,start:0,end:e.length},t)}function Kr(e){return[]}function Re(e,t){le(e,t)}function Ot(e,t){le(e,t)}function Qr(e,t){le(e,t)}function Zr(e,t){le(e,t)}function $e(e,t){le(e,t)}function es(e,t){le(e,t)}function xe(e){return e()}function ts(e){return e()}function ns(e,t){return dn(e,t)!==void 0}function st(e,t){return ns({str:e,start:0,end:e.length},t)}function ct(e){const t=e.length,n={val:0};return()=>{if(n.val<t){const r=n.val,o=e.charCodeAt(r);if(55296<=o&&o<=56319&&(n.val+1|0)<t){const c=n.val+1|0,i=e.charCodeAt(c);if(56320<=i&&i<=57343){const a=ot(o,i);return n.val=n.val+2|0,a}}return n.val=n.val+1|0,o}else return-1}}function Lt(e){return e>=65&&e<=90}function it(e){const t=fn(e,n=>Lt(n));if(t===void 0)return e;{const s=t,r=X(e.length),o=Ce(e,0,s);rt(r,o.str,o.start,o.end-o.start|0);const c=_n(Ce(e,s,void 0));for(;;){const i=xe(c);if(i===-1)break;{const $=i;Lt($)?Z(r,$+32|0):Z(r,$);continue}}return r.val}}function Mt(e){return e>=97&&e<=122}function hn(e){const t=fn(e,n=>Mt(n));if(t===void 0)return e;{const s=t,r=X(e.length),o=Ce(e,0,s);rt(r,o.str,o.start,o.end-o.start|0);const c=_n(Ce(e,s,void 0));for(;;){const i=xe(c);if(i===-1)break;{const $=i;Mt($)?Z(r,$-32|0):Z(r,$);continue}}return r.val}}function ve(e){return{str:e,start:0,end:e.length}}function os(e){const t=ct(e);let s=Kr(e.length);for(;;){const r=xe(t);if(r===-1)break;{const c=r,i=s;es(i,c),s=i;continue}}return s}function mn(e){return e>=0?e<=1?1:e>1073741824?1073741824:(2147483647>>(Math.clz32(e-1|0)-1|0))+1|0:R()}function rs(e){const t=mn(e),n=t-1|0,s=(Math.imul(t,13)|0)/16|0;return{entries:Ye(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:s,head:void 0,tail:-1}}function ss(e,t,n){const s=e.tail;if(s===-1)e.head=n;else{const o=e.entries;V(o,s);const c=o[s];let i;c===void 0?i=R():i=c,i.next=n}e.tail=t;const r=e.entries;V(r,t),r[t]=n,e.size=e.size+1|0}function Rt(e,t,n){const s=e.entries;V(s,n),s[n]=t;const r=t.next;if(r===void 0){e.tail=n;return}else{const c=r;c.prev=n;return}}function cs(e,t,n){let s=n.psl+1|0,r=t+1&e.capacity_mask,o=n;for(;;){const c=s,i=r,a=o,$=e.entries;V($,i);const d=$[i];if(d===void 0){a.psl=c,Rt(e,a,i);break}else{const u=d;if(c>u.psl){a.psl=c,Rt(e,a,i),s=u.psl+1|0,r=i+1&e.capacity_mask,o=u;continue}else{s=c+1|0,r=i+1&e.capacity_mask;continue}}}}function bn(e,t,n,s){e.size>=e.grow_at&&is(e);let r,o=0,c=s&e.capacity_mask;for(;;){const u=o,h=c,_=e.entries;V(_,h);const b=_[h];if(b===void 0){r={_0:h,_1:u};break}else{const g=b;if(g.hash===s&&g.key===t){g.value=n;return}if(u>g.psl){cs(e,h,g),r={_0:h,_1:u};break}o=u+1|0,c=h+1&e.capacity_mask;continue}}const i=r._0,a=r._1,l={prev:e.tail,next:void 0,psl:a,hash:s,key:t,value:n};ss(e,i,l)}function is(e){const t=e.head,n=e.capacity<<1;e.entries=Ye(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const s=e.capacity;e.grow_at=(Math.imul(s,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let r=t;for(;;){const o=r;if(o===void 0)return;{const i=o,a=i.next,$=i.key,d=i.value,l=i.hash;bn(e,$,d,l),r=a;continue}}}function Fe(e,t,n){bn(e,t,n,Fr(t))}function as(e){const t=e.end-e.start|0;let n=mn(t);t>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const r=rs(n),o=e.end-e.start|0;let c=0;for(;;){const i=c;if(i<o){const a=e.buf[e.start+i|0];Fe(r,a._0,a._1),c=i+1|0;continue}else break}return r}function $s(e){return ts(e)}function us(e,t){const n=t.length;let s=0;for(;;){const r=s;if(r<n){Tr(e,t.charCodeAt(r)),s=r+1|0;continue}else return}}function ls(e,t){us(t,e)}function _s(e,t){const n=e.pkg,s=n.str,r=n.start,o=r+(n.end-n.start|0)|0;let c=r,i=-1,a=-1,$=-1,d=-1,l;t:{e:{for(;;)if(c<o)o:{s:{const _=c,b=s.charCodeAt(_);if(c=c+1|0,b<55296){if(b<47)break s;if(b>47)break s;for(;;)if(d=c,c<o){n:{const p=c,g=s.charCodeAt(p);if(c=c+1|0,g<55296){if(g<47)break n;if(g>47)break n;for(;;)if(c<o){r:{const w=c,S=s.charCodeAt(w);if(c=c+1|0,S<56319){if(S<55296)break r;if(c<o){const L=c,E=s.charCodeAt(L);if(c=c+1|0,E<56320)break e;if(E>65535)break e;continue}else break e}else if(S>56319){if(S<65536)break r;break e}else if(c<o){const L=c,E=s.charCodeAt(L);if(c=c+1|0,E<56320)break e;if(E>57343)break e;continue}else break e}continue}else{$=d,i=0,a=c;break e}}else if(g>56318)if(g<57344)if(c<o){const w=c,S=s.charCodeAt(w);if(c=c+1|0,S<56320)break e;if(S>57343)break e;continue}else break e;else{if(g>65535)break e;break n}else if(c<o){const w=c,S=s.charCodeAt(w);if(c=c+1|0,S<56320)break e;if(S>65535)break e;continue}else break e}continue}else break e}else if(b>56318)if(b<57344)if(c<o){const p=c,g=s.charCodeAt(p);if(c=c+1|0,g<56320)break e;if(g>57343)break e;continue}else break e;else{if(b>65535)break e;break s}else if(c<o){const p=c,g=s.charCodeAt(p);if(c=c+1|0,g<56320)break e;if(g>65535)break e;continue}else break e;break o}continue}else break e;break t}if(i===0){let _;e:{o:{const p=K(s,$+1|0,a);if(p.$tag===1)_=p._0;else{p._0;break o}break e}_=R()}let b;e:{o:{const p=K(s,r,$);if(p.$tag===1)b=p._0;else{p._0;break o}break e}b=R()}l={_0:b,_1:_}}else l={_0:n,_1:void 0}}const u=l._0,h=l._1;if(h!==void 0){const b=h;t.method_table.method_2(t.self,b),t.method_table.method_3(t.self,47)}t.method_table.method_2(t.self,e.filename),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_column),t.method_table.method_3(t.self,45),t.method_table.method_2(t.self,e.end_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.end_column),t.method_table.method_3(t.self,64),t.method_table.method_2(t.self,u)}function ds(e,t){_s(Ir(e),t)}function fs(e,t,n){const s=e.length;let r;if(n===void 0)r=s;else{const i=n;r=i<0?s+i|0:i}const o=t;return o>=0&&o<=r&&r<=s?{buf:e,start:o,end:r}:Cr("View index out of bounds","@moonbitlang/core/builtin:arrayview.mbt:251:5-251:38")}function hs(e,t){if((e.end-e.start|0)===0)return"";{const n=e.buf[e.start],s=e.buf,r=1+e.start|0,o=e.end,c={start:r,end:o},i=ve(n);let a=i.end-i.start|0;const $=c.end-c.start|0;let d=0;for(;;){const u=d;if(u<$){const h=s[r+u|0],_=a,b=ve(h);a=_+((b.end-b.start|0)+(t.end-t.start|0)|0)|0,d=u+1|0;continue}else break}a=a<<1;const l=X();if(ce(l,i),Wr(t.str,0,t.start,t.end)){const u=c.end-c.start|0;let h=0;for(;;){const _=h;if(_<u){const b=s[r+_|0],p=ve(b);ce(l,p),h=_+1|0;continue}else break}}else{const u=c.end-c.start|0;let h=0;for(;;){const _=h;if(_<u){const b=s[r+_|0],p=ve(b);ce(l,t),ce(l,p),h=_+1|0;continue}else break}}return l.val}}function ms(e,t){return hs({buf:e,start:0,end:e.length},t)}function bs(e){switch(e){case 0:return Mn;case 1:return Rn;case 2:return In;case 3:return Nn;case 4:return Hn;case 5:return Dn;case 6:return jn;case 7:return Pn;case 8:return Fn;case 9:return Bn;case 10:return Vn;case 11:return Un;case 12:return zn;case 13:return Wn;case 14:return Gn;case 15:return Yn;case 16:return Xn;case 17:return Kn;case 18:return Qn;case 19:return Zn;case 20:return eo;case 21:return to;case 22:return no;case 23:return oo;case 24:return ro;case 25:return so;case 26:return co;case 27:return ao;case 28:return $o;case 29:return uo;case 30:return lo;case 31:return _o;case 32:return Jn;case 33:return io;case 34:return fo;case 35:return ho;case 36:return mo;case 37:return bo;case 38:return po;case 39:return go;default:return new We(e)}}function ps(e,t){const n=[],s=e.length;let r=0;for(;;){const o=r;if(o<s){o<t.length?Ot(n,bs(Mr(t,o))):Ot(n,mr),r=o+1|0;continue}else break}return n}function gs(e,t){vo(e,()=>{t(new zt(void 0))},n=>{t(new Ut(new Ge(n)))})}function ee(e,t,n){So(e,t,(s,r,o,c)=>{const i=ps(s,c);n(new Gt({columns:s,column_types:i,rows:r,nulls:o}))},s=>{n(new Wt(new Ge(s)))})}function ws(e){return Yt(e)?void 0:e}function at(e){return Yt(e)?_e:new P(e)}function Ie(e,t,n,s,r,o,c){const i=[];Re(i,{_0:"capture",_1:s}),Re(i,{_0:"once",_1:r}),Re(i,{_0:"passive",_1:o}),se(e,"addEventListener",[t,n,Eo(i)])}function O(e,t){const n=se(e,"getAttribute",[t]);return ws(n)}function we(e,t){return se(e,"hasAttribute",[t])}function ks(e,t){const n=se(e,"querySelector",[t]);return at(n)}function xs(e,t){const n=se(e,"querySelectorAll",[t]),s=Ao(n),r=new Array(s.length),o=s.length;let c=0;for(;;){const i=c;if(i<o){const a=s[i];r[i]=a,c=i+1|0;continue}else break}return r}function ye(e,t){const n=se(e,"closest",[t]);return at(n)}function It(e,t){const n=se(e,"querySelector",[t]);return at(n)}function ys(e,t){return To(e,t)}function Ss(e){const t=it(Oe(e));let n;if(t!=="form"?n=Lo(e):n=!1,n){if(Ro(e),!qo(e)){const r=bt();return mt(r,"elt",e),mt(r,"message",bt()),No(e,r),!1}return!0}if(t==="form"){if(Oo(e))return!0;Mo(e);const r=Io(e);if(r.length>0){const o=jo(r);if(Ho(e,o),Po()){const c=Rr(r,0);Do(c),Co(e)}return!1}}return!0}function vs(e,t){if(t.$tag===1){const s=t._0;if(Fo(s))return!0}return Ss(e)}function Ne(e){switch(e){case"innerHTML":return 0;case"outerHTML":return 1;case"beforebegin":return 2;case"afterbegin":return 3;case"beforeend":return 4;case"afterend":return 5;case"delete":return 6;case"none":return 8;case"morph":return 7;default:return 0}}function Es(e){switch(e){case 0:return"innerHTML";case 1:return"outerHTML";case 2:return"beforebegin";case 3:return"afterbegin";case 4:return"beforeend";case 5:return"afterend";case 6:return"delete";case 8:return"none";default:return"morph"}}function Be(e){switch(e){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"DELETE";default:return"PATCH"}}function As(e){switch(e){case 1:return!0;case 2:return!0;case 4:return!0;case 0:return!1;default:return!1}}function Nt(e){switch(e){case"hx-get":return br;case"hx-post":return pr;case"hx-put":return gr;case"hx-delete":return wr;case"hx-patch":return kr;default:return}}function pn(e){const t=as({buf:yr,start:0,end:1});if(e.$tag===1){const s=e._0,r=O(s,"id");r===void 0||Fe(t,"HX-Trigger",r);const o=O(s,"name");o===void 0||Fe(t,"HX-Trigger-Name",o)}return t}function Ts(e,t,n,s){const r=pn(n),o=Jt(r);Xt(e,Be(t),n,o,s)}function Ht(e,t,n,s,r){const o=pn(s),c=Jt(o);if(n.$tag===1){const a=n._0;Bo(e,Be(t),a,s,c,r);return}else{Xt(e,Be(t),s,c,r);return}}function Cs(e,t){return t.length===0?e:st(e,{str:xt,start:0,end:xt.length})?`${e}&${t}`:`${e}?${t}`}function qs(e){const t=hn(Oe(e));t:switch(t){case"INPUT":{const n=O(e,"type"),s="text";let r;n===void 0?r=s:r=n;const o=it(r);e:switch(o){case"checkbox":break e;case"radio":break e;case"file":return;default:return gt(e)}if(we(e,"checked")){const c=O(e,"value"),i="on";return c===void 0?i:c}else if(Uo(e)){const i=O(e,"value"),a="on";return i===void 0?a:i}else return}case"SELECT":break t;case"TEXTAREA":break t;default:return}return gt(e)}function Os(e){const t=[],n=xs(e,"input, select, textarea"),s=n.length;let r=0;for(;;){const o=r;if(o<s){const c=n[o],i=O(c,"name");if(i!==void 0){const $=i;if($.length>0){const d=qs(c);d===void 0||Zr(t,{_0:$,_1:d})}}r=o+1|0;continue}else break}return t}function Ls(e){const t=e.length;let n=0;for(;;){const s=n;if(s<t){const r=e[s];Go(r),Yo(r),n=s+1|0;continue}else return}}function gn(e){const t=["hx-get","hx-post","hx-put","hx-delete","hx-patch"],n=t.length;let s=0;for(;;){const r=s;if(r<n){t:{const o=t[r];if(we(e,o)){const i=O(e,o);if(i===void 0)break t;{const $=i,d=Nt(o);if(d===void 0)break t;return{_0:d,_1:$}}}const c=`data-${o}`;if(we(e,c)){const i=O(e,c);if(i===void 0)break t;{const $=i,d=Nt(o);if(d===void 0)break t;return{_0:d,_1:$}}}break t}s=r+1|0;continue}else break}}function Ms(e,t){let n=e;for(;;){const r=Kt(n);if(r.$tag===1){const c=r._0;if(t===""||Le(c,t))return new P(c);n=c;continue}else return _e}}function Rs(e,t){const n=Kt(e);if(n.$tag===1){const r=n._0;return t===""||Le(r,t)?new P(r):Ms(r,t)}else return _e}function Is(e,t){let n=e;for(;;){const r=Qt(n);if(r.$tag===1){const c=r._0;if(t===""||Le(c,t))return new P(c);n=c;continue}else return _e}}function Ns(e,t){const n=Qt(e);if(n.$tag===1){const r=n._0;return t===""||Le(r,t)?new P(r):Is(r,t)}else return _e}function Ve(e,t){if(C(`parse_extended_target: selector = '${t}'`),t==="this")return C("parse_extended_target: this -> returning element"),new P(e);if(pe(t,{str:yt,start:0,end:yt.length})){const n=be(t,7);return C(`parse_extended_target: global '${n}'`),It(De(),n)}else if(pe(t,{str:St,start:0,end:St.length})){const n=be(t,8);return C(`parse_extended_target: closest '${n}'`),ye(e,n)}else if(pe(t,{str:vt,start:0,end:vt.length})){const n=be(t,5);return C(`parse_extended_target: find '${n}'`),ks(e,n)}else if(pe(t,{str:Et,start:0,end:Et.length})){const n=je(be(t,4));C(`parse_extended_target: next with rest = '${n}'`);const s=Rs(e,n);return s.$tag===1?C("parse_extended_target: next found element"):C("parse_extended_target: next NOT found"),s}else if(pe(t,{str:At,start:0,end:At.length})){const n=je(be(t,8));return C(`parse_extended_target: previous with rest = '${n}'`),Ns(e,n)}else return C(`parse_extended_target: default selector '${t}'`),It(De(),t)}function wn(e,t){const n=ie(t),s=[],r=n.length;let o=0;for(;;){const c=o;if(c<r){const i=n[c];if(i!==""){const $=Ve(e,i);if($.$tag===1){const l=$._0;Qr(s,l)}}o=c+1|0;continue}else break}return s}function Hs(e){const t=O(e,"hx-disabled-elt");if(t===void 0){const n=O(e,"data-hx-disabled-elt");return n===void 0?void 0:n}else return t}function Dt(e){if(hn(Oe(e))==="FORM")return new ge(wt(e));const n=ye(e,"form");if(n.$tag===1){const r=n._0;return new ge(wt(r))}else return Xo}function Ue(e){const t=O(e,"hx-indicator");if(t===void 0){const n=O(e,"data-hx-indicator");return n===void 0?void 0:n}else return t}function Ds(e){const t=Ue(e);if(t===void 0){const n=ye(e,"[hx-indicator], [data-hx-indicator]");if(n.$tag===1){const r=n._0,o=Ue(r);return o===void 0?void 0:{_0:r,_1:o}}else return}else return{_0:e,_1:t}}function js(e,t){const n=ie(t),s=[],r=n.length;let o=0;for(;;){const c=o;if(c<r){const i=n[c];if(i==="inherit"){const a=ie(e),$=a.length;let d=0;for(;;){const l=d;if(l<$){const u=a[l];u!==""&&$e(s,u),d=l+1|0;continue}else break}}else i!==""&&$e(s,i);o=c+1|0;continue}else break}return Xe(s)}function Ps(e){const t=ie(e),n=[],s=t.length;let r=0;for(;;){const o=r;if(o<s){const c=t[o];let i;c!=="inherit"?i=c!=="":i=!1,i&&$e(n,c),r=o+1|0;continue}else break}return Xe(n)}function kn(e){let t=e;for(;;){const s=Je(t);if(s.$tag===1){const o=s._0;C("resolve_inherit_from_parent: found parent");const c=ye(o,"[hx-indicator], [data-hx-indicator]");if(c.$tag===1){const a=c._0;C("resolve_inherit_from_parent: closest found indicator_owner");const $=Ue(a);if($===void 0)return;{const l=$;if(C(`resolve_inherit_from_parent: selector = '${l}'`),st(l,{str:Tt,start:0,end:Tt.length})){const u=kn(a);return u===void 0?Ps(l):js(u,l)}else return l}}else{C("resolve_inherit_from_parent: closest not found, trying grandparent"),t=o;continue}}else{C("resolve_inherit_from_parent: no parent found");return}}}function Fs(e,t){C(`resolve_inherit: selector = '${t}'`);const n=ie(t),s=[],r=n.length;let o=0;for(;;){const i=o;if(i<r){const a=n[i];if(C(`resolve_inherit: part = '${a}', trim = '${je(a)}'`),a==="inherit"){C("resolve_inherit: part is inherit, calling resolve_inherit_from_parent");const $=kn(e);if($===void 0)C("resolve_inherit: inherited is None");else{const l=$;C(`resolve_inherit: inherited = '${l}'`);const u=ie(l),h=u.length;let _=0;for(;;){const b=_;if(b<h){const p=u[b];p!==""&&$e(s,p),_=b+1|0;continue}else break}}}else a!==""&&$e(s,a);o=i+1|0;continue}else break}const c=Xe(s);return C(`resolve_inherit: result = '${c}'`),c}function Bs(e){const t=Ds(e);if(t===void 0)return C("get_indicator_elements: no indicator found, using element itself"),[e];{const s=t,r=s._0,o=s._1;C(`get_indicator_elements: found owner with selector '${o}'`);const c=Fs(r,o);C(`get_indicator_elements: resolved selector '${c}'`);const i=wn(r,c);return C(`get_indicator_elements: found ${B(i.length,10)} targets`),i.length===0?[e]:i}}function Vs(e,t){let n=e;for(;;){const r=Je(n);if(r.$tag===1){const c=r._0,i=O(c,t);if(i===void 0){const a=`data-${t}`,$=O(c,a);if($===void 0){n=c;continue}else return $}else return i}else return}}function Us(e){const t=O(e,"hx-inherit");return t===void 0?O(e,"data-hx-inherit"):t}function zs(e,t){let n=e;for(;;){const r=Je(n);if(r.$tag===1){const c=r._0,i=Us(c);if(i===void 0){n=c;continue}else{const d=Qo(i),l=Ko(d),u=Jo(d,t);if(l||u){const h=O(c,t);if(h===void 0){const _=`data-${t}`,b=O(c,_);if(b===void 0){n=c;continue}else return b}else return h}else{n=c;continue}}}else return}}function xn(e,t){return Zo()?zs(e,t):Vs(e,t)}function Ws(e){const t="hx-swap",n=O(e,t);if(n===void 0){const s=O(e,`data-${t}`);if(s===void 0){const r=xn(e,t);return r===void 0?0:Ne(r)}else return Ne(s)}else return Ne(n)}function Gs(e){const t="hx-target",n=O(e,t);let s;if(n===void 0?s=O(e,`data-${t}`):s=n,s===void 0){const r=xn(e,t);if(r===void 0)return e;{const i=Ve(e,r);return i.$tag===1?i._0:e}}else{const c=Ve(e,s);return c.$tag===1?c._0:e}}function Ys(e){const t=e.length;let n=0;for(;;){const s=n;if(s<t){const r=e[s];tr(r),er(r),n=s+1|0;continue}else return}}function Xs(e){if(e.length===0)return"";const t=[],n=e.length;let s=0;for(;;){const r=s;if(r<n){const o=e[r],c=o._0,i=o._1,a=kt(c),$=kt(i);$e(t,`${a}=${$}`),s=r+1|0;continue}else break}return ms(t,{str:Ct,start:0,end:Ct.length})}function qe(e,t){G("process_element_with_trigger called");const n=gn(e);if(n!==void 0){const r=n,o=r._0,c=r._1;if(!vs(e,t))return;const i=Gs(e),a=Ws(e),$=Es(a),d=Hs(e);let l;if(d===void 0)G("No disabled-elt attribute found"),l=[];else{const p=d;G(`Found disabled-elt selector: ${p}`),l=wn(e,p)}G(`Disabled elements count: ${B(l.length,10)}`);const u=Bs(e);u.length>0?G(`Found ${B(u.length,10)} indicator element(s)`):G("No indicator attribute found, using element itself"),G(`Indicator elements count: ${B(u.length,10)}`),u.length>0&&(G(`About to call show_indicators with count: ${B(u.length,10)}`),Ys(u),G("show_indicators returned")),l.length>0&&(G(`About to call disable_elements with count: ${B(l.length,10)}`),Ls(l),G("disable_elements returned"));const h=Wo(e,i,$,c,l,u),_=ys(new P(e),nr);if(As(o)){const b=Dt(e);if(b.$tag===1){const g=b._0;Vo(g,Se(_)),Ht(c,o,new ge(g),new P(e),h);return}else{const p=Se(_),g=zo(e,p);Ht(c,o,new ge(g),new P(e),h);return}}else{const b=Dt(e);let p;if(b.$tag===1){const g=Os(e),w=Xs(g),S=Cs(c,w);p=pt(S,Se(_))}else p=pt(c,Se(_));Ts(p,o,new P(e),h);return}}}function Js(e){qe(e,_e)}function $t(e){const t=["hx-get","hx-post","hx-put","hx-delete","hx-patch"],n=t.length;let s=0;for(;;){const r=s;if(r<n){const o=t[r];if(we(e,o))return new P(e);const c=`data-${o}`;if(we(e,c))return new P(e);s=r+1|0;continue}else break}return ye(e,"[hx-get], [hx-post], [hx-put], [hx-delete], [hx-patch], [data-hx-get], [data-hx-post], [data-hx-put], [data-hx-delete], [data-hx-patch]")}function Ks(e){switch(it(Oe(e))){case"input":return"change";case"textarea":return"change";case"select":return"change";case"form":return"submit";default:return"click"}}function ut(e){const t="hx-trigger",n=O(e,t);let s;if(n===void 0?s=O(e,`data-${t}`):s=n,s===void 0)return Ks(e);{const o=s;if(st(o,{str:qt,start:0,end:qt.length})){const c=os(o);let i=c.length;const a=c.length;let $=0;for(;;){const d=$;if(d<a){if(c[d]===32){i=d;break}$=d+1|0;continue}else break}return zr(fs(c,0,i))}else return o}}function Qs(e){const t=e,n=Ke(e);if(or(n)&&sr(n)){const r=rr(n);if(gn(r)!==void 0){Te(t),qe(r,new P(n));return}}const s=$t(n);if(s.$tag===1){const o=s._0,c=ut(o);if(c==="click"||c==="load"){Te(t),qe(o,new P(n));return}else return}else return}function Zs(e){const t=e,n=Ke(e),s=$t(n);if(s.$tag===1){const o=s._0;if(ut(o)==="change"){Te(t),Js(o);return}else return}else return}function ec(e){const t=e,n=Ke(e),s=cr(e),r=$t(n);if(r.$tag===1){const c=r._0;if(ut(c)==="submit"){Te(t),qe(c,s);return}else return}else return}function tc(){const t=De();Ie(t,"click",Qs,!1,!1,!1),Ie(t,"change",Zs,!1,!1,!1),Ie(t,"submit",ec,!1,!1,!1),ar(t),ir()}function nc(e){$r(t=>{e(new en(t))},t=>{e(new Zt(t))})}function yn(e,t){ur(e,n=>{t(new nn(n))},n=>{t(new tn(n))})}function oc(e,t,n,s){lr(e,t,n,()=>{s(new Ze(void 0))},r=>{s(new Qe(r))})}function jt(e,t){_r(e,()=>{t(new Ze(void 0))},n=>{t(new Qe(n))})}function A(e){nt("#status",e)}function ue(e){nt("#result",e)}function Ae(e){nt("#row-count",e)}function re(e){return e._0}function He(){q("Database ready!");const e=rn(),t=sn();let n;e==="opfs"?n=`Ready (OPFS)${t===""||t==="duckdb.db"?"":` (${t})`}. Click 'Fetch Parquet' to load data.`:n=e==="memory"?"Ready (in-memory). Click 'Fetch Parquet' to load data.":"Ready. Click 'Fetch Parquet' to load data.",A(n),ae("#btn-fetch",!1),ae("#btn-execute",!1)}function Sn(e){q("Installing extensions..."),A("Installing extensions..."),ee(e,"INSTALL parquet; LOAD parquet;",t=>{if(t.$tag===1){q("Parquet extension installed"),ee(e,"INSTALL json; LOAD json;",n=>{if(n.$tag===1){q("JSON extension installed"),He();return}else{const r=n._0;U(`JSON extension failed: ${re(r)}`),He();return}});return}else{const s=t._0;U(`Parquet extension failed: ${re(s)}`),He();return}})}function ze(){q("Opening in-memory database..."),A("Opening in-memory database..."),yn(":memory:",e=>{if(e.$tag===1){const n=e._0;on(n),q("In-memory database opened successfully"),Sn(n);return}else{const n=e._0;U(`Failed to open database: ${n}`),A(`Error: Failed to initialize database - ${n}`);return}})}function rc(){q("Opening OPFS database..."),A("Opening persistent database..."),yn("duckdb.db",e=>{if(e.$tag===1){const n=e._0;on(n);const s=rn(),r=sn();q(s==="opfs"?r===""||r==="duckdb.db"?"OPFS database opened successfully":`OPFS database opened with alternate name: ${r}`:s==="memory"?"OPFS unavailable, using in-memory database":"Database opened successfully"),Sn(n);return}else{const n=e._0;U(`OPFS database failed: ${n}`),ze();return}})}function sc(){q("Initializing application..."),A("Initializing DuckDB..."),tc(),nc(e=>{if(e.$tag===1){const n=e._0;if(q(`OPFS supported: ${Br(n)}`),n){rc();return}else{ze();return}}else{const n=e._0;U(`OPFS check failed: ${n}`),ze();return}})}function lt(){if(ke())if(tt()){const e=de();if(e.$tag===1){const n=e._0,s=`SELECT COUNT(*) as cnt FROM ${Q}`;ee(n,s,r=>{if(r.$tag===1){const c=r._0;if(c.rows.length>0){const i=Pe($n(c.rows,0),0);Ae(`Total rows: ${i}`);return}else return}else{Ae("Error counting rows");return}});return}else return}else{Ae("No data loaded");return}else return}function vn(e){const t=cn(),n=`CREATE OR REPLACE TABLE ${Q} AS SELECT * FROM read_parquet('${t}')`;ee(e,n,s=>{if(s.$tag===1){et(!0),q("Table created from URL"),A("Parquet data loaded successfully!"),ae("#btn-fetch",!1),lt();return}else{const o=s._0,c=re(o);U(`Direct URL query failed: ${c}`),A(`Error: Failed to load parquet - ${c}`),ae("#btn-fetch",!1);return}})}function cc(e){const t=`CREATE OR REPLACE TABLE ${Q} AS SELECT * FROM read_parquet('stats.parquet')`;ee(e,t,n=>{if(n.$tag===1){et(!0),q("Table created from parquet"),A("Parquet data loaded successfully!"),ae("#btn-fetch",!1),lt();return}else{const r=n._0;U(`Table creation failed: ${re(r)}`),vn(e);return}})}function ic(){if(ke()){const e=de();if(e.$tag===1){const n=e._0;q("Fetching parquet file..."),A("Fetching parquet file..."),ae("#btn-fetch",!0);const s=cn();oc(n,"stats.parquet",s,r=>{if(r.$tag===1){q("Remote file registered"),cc(n);return}else{const c=r._0;U(`Failed to register file: ${c}`),vn(n);return}});return}else{A("Error: No connection");return}}else{A("Error: Database not initialized");return}}function ac(e){const t=X(),n=ct(e);for(;;){const s=xe(n);if(s===-1)break;{const o=s;o===39?I(t,"''"):Z(t,o);continue}}return t.val}function Pt(e){const t=X(),n=ct(e);for(;;){const s=xe(n);if(s===-1)break;{const o=s;o===60?I(t,"&lt;"):o===62?I(t,"&gt;"):o===38?I(t,"&amp;"):o===34?I(t,"&quot;"):Z(t,o);continue}}return t.val}function _t(e){const t=X(),n=e.rows.length,s=n>1e3?1e3:n;I(t,'<table class="result-table"><thead><tr>');let r=0;for(;;){const c=r;if(c<e.columns.length){I(t,"<th>"),I(t,Pt(Pe(e.columns,c))),I(t,"</th>"),r=c+1|0;continue}else break}I(t,"</tr></thead><tbody>");let o=0;for(;;){const c=o;if(c<s){I(t,"<tr>");let i=0;for(;;){const a=i;if(a<e.columns.length){I(t,"<td>"),Or(Lr(e.nulls,c),a)?I(t,'<span class="null">NULL</span>'):I(t,Pt(Pe($n(e.rows,c),a))),I(t,"</td>"),i=a+1|0;continue}else break}I(t,"</tr>"),o=c+1|0;continue}else break}I(t,"</tbody></table>"),n>1e3&&I(t,`<p class="notice">Showing ${B(1e3,10)} of ${B(n,10)} rows</p>`),ue(t.val)}function $c(e){if(e.length===0){ue("");return}if(ke())if(tt()){const t=de();if(t.$tag===1){const s=t._0,r=ac(e),o=`SELECT timestamp, connection_id, rtc_type FROM ${Q} WHERE connection_id LIKE '%${r}%' OR channel_id LIKE '%${r}%' OR timestamp LIKE '%${r}%' OR rtc_type LIKE '%${r}%' USING SAMPLE 1 PERCENT (bernoulli)`;q(`Search: ${e}`),ee(s,o,c=>{if(c.$tag===1){const a=c._0;q(`Search returned ${B(a.rows.length,10)} rows`),_t(a);return}else{const a=c._0,$=re(a);U(`Search failed: ${$}`),ue("");return}});return}else return}else return;else return}function uc(){if(ke()){const e=de();if(e.$tag===1){const n=e._0,s=dr();if(s.length===0){A("Please enter a SQL query");return}q(`Executing: ${s}`),A("Executing query..."),ee(n,s,r=>{if(r.$tag===1){const c=r._0;q(`Query returned ${B(c.rows.length,10)} rows`),A(`Query completed: ${B(c.rows.length,10)} rows`),_t(c);return}else{const c=r._0,i=re(c);U(`Query failed: ${i}`),A(`Error: ${i}`),ue('<div class="error">Error: (check console)</div>');return}});return}else{A("Error: No connection");return}}else{A("Error: Database not initialized");return}}function lc(e){if(ke())if(tt()){const t=de();if(t.$tag===1){const s=t._0;let r;switch(e){case"samples":{r=`SELECT timestamp, connection_id, rtc_type FROM ${Q} USING SAMPLE 1 PERCENT (bernoulli)`;break}case"aggregation":{r=`SELECT time_bucket, channel_id, session_id, connection_id, bytes_sent_diff, bytes_received_diff, packets_sent_diff, packets_received_diff FROM ( SELECT time_bucket, channel_id, session_id, connection_id, bytes_sent - LAG(bytes_sent) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS bytes_sent_diff, bytes_received - LAG(bytes_received) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS bytes_received_diff, packets_sent - LAG(packets_sent) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS packets_sent_diff, packets_received - LAG(packets_received) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS packets_received_diff FROM ( SELECT strftime(time_bucket('15 seconds', strptime(timestamp, '%Y-%m-%dT%H:%M:%S.%fZ')), '%Y-%m-%d %H:%M:%S') AS time_bucket, channel_id, session_id, connection_id, MAX(CAST(rtc_data->'$.bytesSent' AS BIGINT)) AS bytes_sent, MAX(CAST(rtc_data->'$.bytesReceived' AS BIGINT)) AS bytes_received, MAX(CAST(rtc_data->'$.packetsSent' AS BIGINT)) AS packets_sent, MAX(CAST(rtc_data->'$.packetsReceived' AS BIGINT)) AS packets_received FROM ${Q} WHERE rtc_type = 'transport' GROUP BY time_bucket, channel_id, session_id, connection_id ) ) WHERE bytes_sent_diff IS NOT NULL AND bytes_received_diff IS NOT NULL AND packets_sent_diff IS NOT NULL AND packets_received_diff IS NOT NULL ORDER BY time_bucket ASC`;break}case"describe":{r=`DESCRIBE ${Q}`;break}default:r=`SELECT * FROM ${Q} LIMIT 10`}q(`Preset query: ${e}`),A(`Running preset: ${e}`),ee(s,r,o=>{if(o.$tag===1){const i=o._0;q(`Preset query returned ${B(i.rows.length,10)} rows`),A(`Completed: ${B(i.rows.length,10)} rows`),_t(i);return}else{const i=o._0,a=re(i);U(`Preset query failed: ${a}`),A(`Error: ${a}`),ue('<div class="error">Error: (check console)</div>');return}});return}else{A("Error: No connection");return}}else{A("Please load parquet data first");return}else{A("Error: Database not initialized");return}}function Ft(){jt("duckdb.db",e=>{if(e.$tag===1){jt("duckdb.db-wal",t=>{if(t.$tag===1){et(!1),A("Cache purged. Reload the page to restart."),ue(""),Ae(""),q("Cache purged");return}else{const s=t._0;U(`Failed to delete duckdb.db-wal: ${s}`),A("Cache purge failed (db-wal locked). Close other tabs and retry.");return}});return}else{const n=e._0;U(`Failed to delete duckdb.db: ${n}`),A("Cache purge failed (db locked). Close other tabs and retry.");return}})}function _c(){q("Purging cache..."),A("Purging cache...");const e=de();if(e.$tag===1){const n=e._0;gs(n,s=>{Ft()});return}else{Ft();return}}function dc(){sc()}function fc(){uc()}function hc(){ic()}function mc(){_c()}function bc(){lt()}function pc(e){lc(e)}function gc(e){$c(e)}window.app={fetch_parquet:hc||void 0||(()=>console.error("fetch_parquet not found")),run_sql_query:fc||void 0||(()=>console.error("run_sql_query not found")),run_preset_query:pc||void 0||(()=>console.error("run_preset_query not found")),purge_cache:mc||void 0||(()=>console.error("purge_cache not found")),get_row_count:bc||void 0||(()=>console.error("get_row_count not found")),app_init:dc||void 0||(()=>console.error("app_init not found")),perform_search:gc||void 0||(()=>console.error("perform_search not found"))};const Bt=document.getElementById("search-input");Bt&&Bt.addEventListener("input",e=>{window.app.perform_search(e.target.value)});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.app.app_init()}):window.app.app_init();
