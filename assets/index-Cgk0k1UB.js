(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const Hn="modulepreload",Dn=function(e,t){return new URL(e,t).href},pt={},Ye=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let $=function(d){return Promise.all(d.map(l=>Promise.resolve(l).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};const c=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),a=i?.nonce||i?.getAttribute("nonce");s=$(n.map(d=>{if(d=Dn(d,r),d in pt)return;pt[d]=!0;const l=d.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(r)for(let _=c.length-1;_>=0;_--){const m=c[_];if(m.href===d&&(!l||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${d}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":Hn,l||(h.as="script"),h.crossOrigin="",h.href=d,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((_,m)=>{h.addEventListener("load",_),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function o(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return s.then(c=>{for(const i of c||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},Pn={$tag:0},Un={$tag:1},Bn={$tag:2},Fn={$tag:3},Vn={$tag:4},zn={$tag:5},Wn={$tag:6},Gn={$tag:7},Yn={$tag:8},Xn={$tag:9},Jn={$tag:10},Qn={$tag:11},Kn={$tag:12},Zn={$tag:13},eo={$tag:14},to={$tag:15},no={$tag:16},oo={$tag:17},ro={$tag:18},so={$tag:19},co={$tag:20},io={$tag:21},ao={$tag:22},$o={$tag:23},uo={$tag:24},lo={$tag:25},_o={$tag:26},fo={$tag:27},ho={$tag:28},mo={$tag:29},po={$tag:30},bo={$tag:31},go={$tag:32},wo={$tag:33},ko={$tag:34},xo={$tag:35},yo={$tag:36},So={$tag:37},vo={$tag:38},Eo={$tag:39};function Xe(e){this._0=e}Xe.prototype.$tag=40;class Ao extends Error{}function R(){throw new Ao}function V(e,t){if(t<0||t>=e.length)throw new Error("Index out of bounds")}const To=()=>{if(globalThis.crypto?.getRandomValues){const e=new Uint32Array(1);return globalThis.crypto.getRandomValues(e),e[0]|0}else return Math.floor(Math.random()*4294967296)|0};function Ee(e){this._0=e}Ee.prototype.$tag=0;function Yt(e){this._0=e}Yt.prototype.$tag=1;function Je(e){this._0=e}Je.prototype.$tag=2;const qo={$tag:1},bt={$tag:0},Co=(e,t)=>e.toString(t);function Qe(e,t){const n=new Array(e);return n.fill(t),n}const le=(e,t)=>{e.push(t)},Oo=(e,t,n,r)=>{const s=u=>u&&u.message?u.message:String(u);let o=null,c=null;const i=(u,h)=>{if(u==null)return["",!0];if(typeof u=="string"){if(h!==null&&(h===o||h===c)){if(u==="NaN")return["nan",!1];if(u==="Infinity")return["inf",!1];if(u==="-Infinity")return["-inf",!1]}return[u,!1]}return typeof u=="number"?Number.isNaN(u)?["nan",!1]:u===1/0?["inf",!1]:u===-1/0?["-inf",!1]:[String(u),!1]:typeof u=="boolean"||typeof u=="bigint"?[String(u),!1]:[JSON.stringify(u),!1]},a=(u,h,_,m)=>{const p=[],g=[];for(let w=0;w<u.length;w++){const S=i(u[w],m?m[w]:null);p.push(S[0]),g.push(S[1])}h.push(p),_.push(g)},$=async()=>{const u=await Ye(()=>import("./duckdb-node-api-xmTyaD0R.js"),[],import.meta.url);o=u.DuckDBTypeId.FLOAT,c=u.DuckDBTypeId.DOUBLE;const h=await e.connection.run(t),_=h.columnNames(),m=await h.getRowsJson(),p=_.map((S,O)=>h.columnTypeId(O)),g=[],w=[];for(const S of m){const O=Array.isArray(S)?S:_.map(A=>S[A]);a(O,g,w,p)}n(_,g,w,p)},d=async()=>{const u=await e.conn.query(t);let h=[];u&&u.schema&&u.schema.fields&&(h=u.schema.fields.map(w=>w.name));const _=u.toArray().map(w=>w.toJSON());h.length===0&&_.length>0&&(h=Object.keys(_[0]));const m=[],p=[];for(const w of _){const S=h.map(O=>w[O]);a(S,m,p,null)}n(h,m,p,[])};(async()=>{if(e&&e.kind==="node"){await $();return}if(e&&e.kind==="wasm"){await d();return}throw new Error("unknown connection backend")})().catch(u=>r(s(u)))},Lo=(e,t,n)=>{const r=o=>o&&o.message?o.message:String(o);(async()=>{if(e&&e.kind==="node"){e.connection&&typeof e.connection.closeSync=="function"&&e.connection.closeSync(),e.instance&&typeof e.instance.close=="function"&&await e.instance.close(),t();return}if(e&&e.kind==="wasm"){e.conn&&typeof e.conn.close=="function"&&await e.conn.close(),e.db&&typeof e.db.terminate=="function"&&await e.db.terminate(),e.worker&&typeof e.worker.terminate=="function"&&e.worker.terminate(),t();return}throw new Error("unknown connection backend")})().catch(o=>n(r(o)))};function Xt(e){this._0=e}Xt.prototype.$tag=0;function Jt(e){this._0=e}Jt.prototype.$tag=1;function Qt(e){this._0=e}Qt.prototype.$tag=0;function Kt(e){this._0=e}Kt.prototype.$tag=1;const se=(e,t,n)=>e[t](...n),Zt=e=>e==null,gt=(e,t,n)=>{e[t]=n},wt=()=>({}),Ro=e=>Object.fromEntries(e.map(t=>[t._0,t._1])),Mo=e=>Array.from(e),_e={$tag:0};function P(e){this._0=e}P.prototype.$tag=1;const Te=e=>e.preventDefault(),Oe=e=>e.tagName,De=()=>document,Io=(e,t)=>{const n=e&&e.$tag===1?e._0:null,r=(l,u)=>l?l.getAttribute(u)||l.getAttribute("data-"+u):null,s=(l,u,h)=>{let _=u?u.trim():"",m=h;if(_==="unset")return null;_.indexOf("javascript:")===0?(_=_.slice(11),m=!0):_.indexOf("js:")===0&&(_=_.slice(3),m=!0),_.indexOf("{")!==0&&(_="{"+_+"}");let p;if(m){if(!(window.htmx&&window.htmx.config&&window.htmx.config.allowEval!==!1)){const w=new CustomEvent("htmx:evalDisallowedError",{bubbles:!0,cancelable:!0,detail:{source:"hx-vars"}});return l.dispatchEvent(w),{}}try{if(t){const w=t&&t.$tag===1?t._0:t;p=new Function("event","return ("+_+")").call(l,w)}else p=new Function("return ("+_+")").call(l)}catch(w){return console.error("htmx.mbt: Error evaluating vars:",w),{}}}else try{p=JSON.parse(_)}catch(g){return console.error("htmx.mbt: Error parsing vars JSON:",g),{}}return p||{}},o=(l,u,h,_,m)=>{if(_==null&&(_={}),l==null)return _;const p=r(l,u);if(p){let w=p.trim(),S=h;if(w==="unset")return null;w.indexOf("javascript:")===0?(w=w.slice(11),S=!0):w.indexOf("js:")===0&&(w=w.slice(3),S=!0),w.indexOf("{")!==0&&(w="{"+w+"}");let O;S?O=s(l,w,!0):O=s(l,w,!1);for(const A in O)O.hasOwnProperty(A)&&_[A]==null&&(_[A]=O[A])}const g=l.parentElement;return g?o(g,u,h,_):_};let c={},i={};n&&(c=o(n,"hx-vars",!0,{})||{},i=o(n,"hx-vals",!1,{})||{});const a={...c,...i},$=Object.entries(a),d=[];for(const[l,u]of $)d.push({_0:l,_1:String(u)});return{buf:d,start:0,end:d.length}},Se=e=>e,No=e=>e.reportValidity?e.reportValidity():!0,jo=e=>e.checkValidity?e.checkValidity():!0,Ho=e=>e.hasAttribute("novalidate"),Do=e=>e.hasAttribute("hx-validate")||e.hasAttribute("data-hx-validate"),Po=e=>{const t=e.querySelectorAll("input, select, textarea");for(let n=0;n<t.length;n++){const r=new CustomEvent("htmx:validation:validate",{bubbles:!0,cancelable:!0});t[n].dispatchEvent(r)}},Uo=e=>{const t=new CustomEvent("htmx:validation:validate",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)},Bo=e=>{if(!e.querySelectorAll)return[];const t=[],n=e.querySelectorAll("input, select, textarea");for(let r=0;r<n.length;r++)n[r].checkValidity&&!n[r].checkValidity()&&t.push(n[r]);return t},Fo=(e,t)=>{const n=new CustomEvent("htmx:validation:failed",{bubbles:!0,cancelable:!0,detail:t});return e.dispatchEvent(n)},Vo=(e,t)=>{const n=new CustomEvent("htmx:validation:halted",{bubbles:!0,cancelable:!0,detail:{errors:t}});e.dispatchEvent(n)},zo=e=>{e.focus&&e.focus()},Wo=e=>e.map(t=>({elt:t,message:t.validationMessage||"",validity:t.validity||{}})),Go=()=>window.htmx&&window.htmx.config&&window.htmx.config.reportValidityOfForms===!0,Yo=e=>{try{return e&&(e.hasAttribute("formnovalidate")||e.formnovalidate===!0)}catch{return!1}},en=(e,t,n,r,s)=>{const o=new XMLHttpRequest;o.open(t,e,!0);const c=r;for(const[i,a]of Object.entries(c))o.setRequestHeader(i,a);o.onload=function(){o.status>=200&&o.status<300?s(o.responseText||""):s(null)},o.onerror=function(){s(null)},o.send()},Xo=(e,t,n,r,s,o)=>{const c=new XMLHttpRequest;c.open(t,e,!0);const i=s;for(const[$,d]of Object.entries(i))c.setRequestHeader($,d);c.onload=function(){c.status>=200&&c.status<300?o(c.responseText||""):o(null)},c.onerror=function(){o(null)};let a=n;if(n&&typeof n.append=="function"){const $=[];for(const[d,l]of n.entries())$.push(encodeURIComponent(d)+"="+encodeURIComponent(l));a=$.join("&")}c.send(a)},tn=e=>{const t={};if(e&&e.buf)for(let n=e.start||0;n<(e.end||e.buf.length);n++){const r=e.buf[n];r&&r._0!==void 0&&(t[r._0]=r._1)}return t},G=e=>console.log("[htmx.mbt DEBUG] "+e),Jo=(e,t)=>{if(t&&t.buf)for(let n=t.start||0;n<(t.end||t.buf.length);n++){const r=t.buf[n];if(r&&r._0!==void 0){const s=r._0,o=r._1;e.delete(s),e.append(s,o)}}},kt=(e,t)=>{let n=[];if(t&&t.buf)for(let s=t.start||0;s<(t.end||t.buf.length);s++){const o=t.buf[s];if(o&&o._0!==void 0){const c=encodeURIComponent(o._0),i=encodeURIComponent(o._1);n.push(c+"="+i)}}if(n.length===0)return e;const r=e.includes("?")?"&":"?";return e+r+n.join("&")},Qo=e=>!!e.checked,xt=e=>e.value||"",Ko=(e,t)=>{const n=new FormData,r=e.tagName.toUpperCase();if(r==="INPUT"||r==="SELECT"||r==="TEXTAREA"){const o=e.getAttribute("name");if(o&&o.length>0){let c=null;if(r==="INPUT"){const i=e.getAttribute("type")||"text";i==="checkbox"||i==="radio"?e.checked&&(c=e.value||"on"):i!=="file"&&(c=e.value||"")}else c=e.value||"";c!==null&&n.append(o,c)}}const s=e.querySelectorAll("input, select, textarea");for(const o of s){const c=o.getAttribute("name");if(c&&c.length>0){let i=null;const a=o.tagName.toUpperCase();if(a==="INPUT"){const $=o.getAttribute("type")||"text";if($==="checkbox"||$==="radio")o.checked&&(i=o.value||"on");else{if($==="file")continue;i=o.value||""}}else(a==="SELECT"||a==="TEXTAREA")&&(i=o.value||"");i!==null&&n.append(c,i)}}if(t&&t.buf)for(let o=t.start||0;o<(t.end||t.buf.length);o++){const c=t.buf[o];if(c&&c._0!==void 0){const i=c._0,a=c._1;n.delete(i),n.append(i,a)}}return n},Zo=(e,t,n,r,s,o)=>function(c){if(o.length>0)for(const i of o){const $=i["htmx-internal-data"];$&&($.indicatorCount=($.indicatorCount||1)-1),($&&$.indicatorCount||0)===0&&i.classList.remove("htmx-request")}if(s.length>0)for(const i of s){const $=i["htmx-internal-data"];$&&($.requestCount=($.requestCount||1)-1),($&&$.requestCount||0)===0&&i.removeAttribute("disabled")}if(c!==null){const i=window.htmx||{},a=i.config||{},$=e.getAttribute("hx-select")||e.getAttribute("data-hx-select"),d=i._?i._("getSwapSpecification"):null,l=d?d(e):null,u=typeof a.defaultSwapStyle=="string"?a.defaultSwapStyle:"innerHTML",h=n&&typeof n=="string"?n:l&&typeof l.swapStyle=="string"?l.swapStyle:u,_=l&&typeof l.swapDelay=="number"?l.swapDelay:0,m=l&&typeof l.settleDelay=="number"?l.settleDelay:typeof a.defaultSettleDelay=="number"?a.defaultSettleDelay:0,p=l&&l.transition===!0,g=l?l.scroll:null,w=l?l.show:null,S=a.allowNestedOobSwaps!==!1,A=new Set(["innerHTML","outerHTML","beforebegin","afterbegin","beforeend","afterend","delete","none","morph","textContent"]).has(h)?h:u,b=new DOMParser;let D=c,k=null;if(A!=="textContent"){let v=b.parseFromString(c,"text/html");if($){const y=v.querySelector($);D=y?y.outerHTML:"",v=b.parseFromString(D,"text/html")}else D=v.body.innerHTML;k=v;const B=e&&e.getRootNode?e.getRootNode():document,z=B&&B.querySelectorAll?B:document,fe=y=>{y.removeAttribute("hx-swap-oob"),y.removeAttribute("data-hx-swap-oob")},ne=y=>y?window.CSS&&CSS.escape?"#"+CSS.escape(y):'[id="'+String(y).replace(/"/g,'\\"')+'"]':null,oe=y=>["innerHTML","outerHTML","beforebegin","afterbegin","beforeend","afterend","delete","none","morph"].includes(y)?y:"innerHTML",Re=y=>{const j=y.getAttribute("hx-swap-oob")||y.getAttribute("data-hx-swap-oob")||"true";let N="innerHTML",H=null;if(j==="true")N="outerHTML",H=ne(y.getAttribute("id"));else if(j.includes(":")){const W=j.split(":");N=W[0]||"innerHTML",H=W.slice(1).join(":")}else N=j,H=ne(y.getAttribute("id"));let J=!1;if(H){const W=H.trim();W.startsWith("global ")?(J=!0,H=W.slice(7).trim()):W==="global"?(J=!0,H=null):H=W}return{swapStyle:oe(N),targetSelector:H,isGlobal:J}},he=y=>{if(!y.targetSelector)return[];const j=y.isGlobal?document:z;if(!j||!j.querySelectorAll)return[];try{return Array.from(j.querySelectorAll(y.targetSelector))}catch{return[]}},Rn=(y,j,N,H)=>{switch(j.swapStyle){case"innerHTML":y.innerHTML=N;break;case"outerHTML":y.outerHTML=H;break;case"beforebegin":y.insertAdjacentHTML("beforebegin",H);break;case"afterbegin":y.insertAdjacentHTML("afterbegin",N);break;case"beforeend":y.insertAdjacentHTML("beforeend",N);break;case"afterend":y.insertAdjacentHTML("afterend",H);break;case"delete":y.remove();break;case"none":break;default:y.innerHTML=N;break}},mt=(y,j)=>{const N=y.parentElement;if(!j&&!S&&N&&N!==k.body&&N.tagName!=="BODY"){fe(y);return}const J=Re(y),W=he(J);if(J.swapStyle==="delete"){for(const me of W)me.remove();y.remove();return}if(fe(y),W.length===0){if(J.targetSelector){const me=new CustomEvent("htmx:oobErrorNoTarget",{bubbles:!0,cancelable:!0,detail:{content:y}});document.body.dispatchEvent(me)}y.remove();return}const Nn=y.innerHTML,jn=y.outerHTML;for(const me of W)Rn(me,J,Nn,jn);y.remove()},Mn=k.querySelectorAll("template");for(const y of Mn){const j=y.content;if(!j)continue;const N=j.querySelectorAll("[hx-swap-oob], [data-hx-swap-oob]");if(N.length!==0){for(const H of N)mt(H,!0);y.remove()}}const In=k.querySelectorAll("[hx-swap-oob], [data-hx-swap-oob]");for(const y of In)mt(y,!1);D=k.body.innerHTML}const f=v=>{const B=new CustomEvent("htmx:swapError",{bubbles:!0,cancelable:!0,detail:{error:v}});document.body.dispatchEvent(B)},I=v=>{switch(A){case"innerHTML":t.innerHTML=v;break;case"outerHTML":t.tagName&&t.tagName.toUpperCase()==="BODY"?t.innerHTML=v:t.outerHTML=v;break;case"beforebegin":t.insertAdjacentHTML("beforebegin",v);break;case"afterbegin":t.insertAdjacentHTML("afterbegin",v);break;case"beforeend":t.insertAdjacentHTML("beforeend",v);break;case"afterend":t.insertAdjacentHTML("afterend",v);break;case"delete":t.remove();break;case"none":break;case"textContent":t.textContent=v;break;case"morph":t.innerHTML=v;break;default:t.innerHTML=v;break}},x=v=>v?!v.target||v.target==="window"?document.body:document.querySelector(v.target):null,T=()=>{if(g&&g.direction){const v=x(g);v&&(g.direction==="top"?v===document.body?window.scrollTo(0,0):v.scrollTop=0:g.direction==="bottom"&&(v===document.body?window.scrollTo(0,document.body.scrollHeight):v.scrollTop=v.scrollHeight))}if(w&&w.direction){const v=x(w);if(v&&typeof v.scrollIntoView=="function"){const B=w.direction==="bottom"?"end":"start";v.scrollIntoView({block:B})}}},Y=()=>{try{typeof window.makeSettleInfo=="function"&&window.makeSettleInfo(t),I(D)}catch(B){f(B);return}if(window.htmx&&window.htmx.config&&window.htmx.config.allowEval!==!1){window.htmx._internal||(window.htmx._internal={}),window.htmx._internal.loadedScripts||(window.htmx._internal.loadedScripts=new Set);const B=t.querySelectorAll("script");for(const z of B){const fe=z.getAttribute("type");if(!fe||fe==="text/javascript"){const ne=z.getAttribute("src");if(ne){if(window.htmx._internal.loadedScripts.has(ne)){z.remove();continue}const oe=document.createElement("script");oe.src=ne;const Re=["id","nonce","referrerpolicy","type","async","defer","crossorigin"];for(const he of Re)z.hasAttribute(he)&&oe.setAttribute(he,z.getAttribute(he));window.htmx._internal.loadedScripts.add(ne),z.replaceWith(oe)}else if(z.textContent){try{new Function(z.textContent)()}catch(oe){console.error("htmx.mbt: Error executing script:",oe)}z.remove()}}}}const v=e.getAttribute("hx-push-url")||e.getAttribute("data-hx-push-url");if(v&&v!=="false"){const B=v==="true"?r:v;if(history.pushState(null,"",B),window.htmx&&window.htmx._&&typeof window.htmx._=="function")try{window.htmx._("saveToHistoryCache")(B,t)}catch{}}m>0?setTimeout(T,m):T()};_>0||p?setTimeout(Y,_):Y()}},er=e=>{const t="htmx-internal-data";let n=e[t];n||(n={},e[t]=n),n.requestCount=(n.requestCount||0)+1},tr=e=>e.setAttribute("disabled","disabled"),Le=(e,t)=>e.matches(t),nn=e=>{const t=e.nextElementSibling;return t?{$tag:1,_0:t}:{$tag:0}},on=e=>{const t=e.previousElementSibling;return t?{$tag:1,_0:t}:{$tag:0}},q=e=>console.log("[htmx.mbt ATTR DEBUG] "+e),pe=(e,t)=>e.substring(t),Pe=e=>e.trim(),ae=e=>e.split(",").map(t=>t.trim()),yt=e=>new FormData(e),nr={$tag:0};function ge(e){this._0=e}ge.prototype.$tag=1;const Ke=e=>e.filter(t=>t!=="").join(", "),Ze=e=>{const t=e.parentElement;return t?{$tag:1,_0:t}:{$tag:0}},or=(e,t)=>!e||!Array.isArray(e)?!1:e.includes(t),rr=e=>!e||!Array.isArray(e)?!1:e.includes("*"),sr=e=>!e||e==="*"?["*"]:e.split(/\s+/).filter(t=>t.length>0),cr=()=>{try{return window.htmx&&window.htmx.config&&window.htmx.config.disableInheritance===!0}catch{return!1}},ir=e=>e.classList.add("htmx-request"),ar=e=>{const t="htmx-internal-data";let n=e[t];n||(n={},e[t]=n),n.indicatorCount=(n.indicatorCount||0)+1},St=e=>encodeURIComponent(e),$r={$tag:0},et=e=>{if(e&&typeof e.composedPath=="function"){const t=e.composedPath();if(t&&t.length>0&&t[0]&&t[0].nodeType===1)return t[0]}return e.target},ur=e=>e&&e.tagName==="BUTTON"&&(e.type==="submit"||!e.type),lr=e=>e.form||e.closest("form"),_r=e=>!!(e.form||e.closest("form")),dr=e=>e.submitter||null,fr=()=>{const e=document,t=s=>{const o=s.getAttribute("hx-trigger")||s.getAttribute("data-hx-trigger");if(o){const c=o.split(",").map(i=>i.trim());for(const i of c)if(i==="load"||i.startsWith("load ")){const a=new MouseEvent("click",{bubbles:!0,cancelable:!0});s.dispatchEvent(a);break}}},n=e.querySelectorAll("[hx-trigger], [data-hx-trigger]");for(const s of n)t(s);new MutationObserver(s=>{for(const o of s)for(const c of o.addedNodes)if(c.nodeType===1){c.getAttribute&&(c.getAttribute("hx-trigger")||c.getAttribute("data-hx-trigger"))&&t(c);const i=c.querySelectorAll("[hx-trigger], [data-hx-trigger]");for(const a of i)t(a)}}).observe(e.body,{childList:!0,subtree:!0})},hr=e=>{const t=["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","keydown","keyup","keypress","change","input","submit","focus","blur","load","revealed","htmx:config-request","htmx:after-request","htmx:before-request","htmx:before-swap","htmx:after-swap","htmx:before-settle","htmx:after-settle","htmx:validation:failed","htmx:validation:halted","htmx:evalDisallowedError"],n=function(r){const s=r.type;let o=r.target;for(;o&&o!==document;){const c=o.attributes;for(let i=0;i<c.length;i++){const a=c[i].name;let $=null;if(a.startsWith("hx-on:")||a.startsWith("hx-on-")?$=a.slice(6):(a.startsWith("data-hx-on:")||a.startsWith("data-hx-on-"))&&($=a.slice(11)),$!==null&&(($.startsWith("::")||$.startsWith("--"))&&($="htmx:"+$.slice(2)),$===s)){const d=c[i].value;if(window.htmx&&window.htmx.config&&window.htmx.config.allowEval===!1){const h=new CustomEvent("htmx:evalDisallowedError",{bubbles:!0,cancelable:!0,detail:{source:"hx-on"}});o.dispatchEvent(h);return}const l="htmx-internal-data";let u=o[l];if(u||(u={},o[l]=u),u.hxOnHandlers||(u.hxOnHandlers={}),!u.hxOnHandlers[s])try{u.hxOnHandlers[s]=new Function("event",d)}catch(h){console.error("htmx.mbt: Error creating hx-on handler:",h);return}try{u.hxOnHandlers[s].call(o,r)}catch(h){console.error("htmx.mbt: Error executing hx-on handler:",h)}return}}o=o.parentElement}};for(const r of t)e.addEventListener(r,n,{capture:!1})},mr=(e,t)=>{(async()=>{try{if(!navigator.storage||!navigator.storage.getDirectory){e(!1);return}await navigator.storage.getDirectory(),e(!0)}catch{e(!1)}})().catch(r=>t(r.message||String(r)))};function rn(e){this._0=e}rn.prototype.$tag=0;function sn(e){this._0=e}sn.prototype.$tag=1;const pr=(e,t,n)=>{const r=o=>o&&o.message?o.message:String(o);(async()=>{if(typeof Worker>"u")throw new Error("duckdb-wasm requires Worker support");const o=await Ye(()=>import("./duckdb-browser-odMagBQf.js"),[],import.meta.url),i=`https://cdn.jsdelivr.net/npm/@duckdb/duckdb-wasm@${o.PACKAGE_VERSION||"1.32.0"}/dist/`,a=`${i}duckdb-mvp.wasm`,$=`${i}duckdb-browser-mvp.worker.js`,l=(k=>{const f=`var _setThrew = function() {};
importScripts(${JSON.stringify(k)});`;return URL.createObjectURL(new Blob([f],{type:"text/javascript"}))})($),u={mvp:{mainModule:a,mainWorker:l}},h=await o.selectBundle(u),_=new o.ConsoleLogger(o.LogLevel.WARNING);if(!h.mainWorker)throw new Error("duckdb-wasm bundle missing mainWorker");const m=new Worker(h.mainWorker);URL.revokeObjectURL(l);const p=new o.AsyncDuckDB(_,m);await p.instantiate(h.mainModule,h.pthreadWorker);const g=k=>{window.__duckdb_storage=k},w=k=>{window.__duckdb_storage_name=k},S=async()=>{await p.open({query:{castBigIntToDouble:!0}}),g("memory"),w(":memory:")},O=async k=>{const f=k.startsWith("opfs://")?k:`opfs://${k}`;await p.open({path:f,accessMode:3,opfs:{fileHandling:"auto"},query:{castBigIntToDouble:!0}}),g("opfs"),w(k)},A=k=>k.includes("not a valid DuckDB database file")||k.includes("Access Handles cannot be created")||k.includes("createSyncAccessHandle"),b=k=>{const f=`${Date.now()}-${Math.random().toString(16).slice(2)}`;return k.endsWith(".db")?`${k.slice(0,-3)}-${f}.db`:`${k}-${f}`};if(e&&e!==":memory:")try{await navigator.storage.getDirectory(),await O(e)}catch(k){const f=r(k);if(A(f))try{await O(b(e))}catch(I){console.warn("OPFS retry failed, using in-memory database:",I),await S()}else console.warn("OPFS not available, using in-memory database:",k),await S()}else await S();const D=await p.connect();t({kind:"wasm",db:p,conn:D,worker:m})})().catch(o=>n(r(o)))};function cn(e){this._0=e}cn.prototype.$tag=0;function an(e){this._0=e}an.prototype.$tag=1;const br=(e,t,n,r,s)=>{(async()=>{if(!e||e.kind!=="wasm"||!e.db)throw new Error("Connection must be a WASM connection");const c=await Ye(()=>import("./duckdb-browser-odMagBQf.js"),[],import.meta.url);await e.db.registerFileURL(t,n,c.DuckDBDataProtocol.HTTP,!1),r()})().catch(c=>s(c.message||String(c)))};function tt(e){this._0=e}tt.prototype.$tag=0;function nt(e){this._0=e}nt.prototype.$tag=1;const gr=(e,t,n)=>{(async()=>{const s=await navigator.storage.getDirectory();try{await s.removeEntry(e)}catch(o){if(o.name!=="NotFoundError")throw o}t()})().catch(s=>n(s.message||String(s)))},$n=e=>{window.__duckdb_conn=e},de=()=>{const e=window.__duckdb_conn;return e?{$tag:1,_0:e}:{$tag:0}},ke=()=>!!window.__duckdb_conn,ot=e=>{window.__parquet_loaded=e},rt=()=>!!window.__parquet_loaded,un=()=>window.__duckdb_storage||"unknown",ln=()=>window.__duckdb_storage_name||"",C=e=>console.log("[app] "+e),U=e=>console.error("[app] "+e),_n=()=>window.__parquet_url||"",st=(e,t)=>{const n=document.querySelector(e);n&&(n.innerHTML=t)},Z=(e,t)=>{const n=document.querySelector(e);n&&(n.disabled=t)},wr=()=>{const e=document.querySelector("#sql-input");return e?e.value:""},dn={method_0:M,method_1:it,method_2:ce,method_3:ee},kr=0,xr=0,yr=new Xe(-1),K="stats",vt="?",Et="global ",At="closest ",Tt="find ",qt="next",Ct="previous",Ot="inherit",Lt="&",Rt=" ",Sr=0,vr=1,Er=2,Ar=3,Tr=4,qr={_0:"HX-Request",_1:"true"},Cr=[qr],Mt="Error: Parquet URL not set (VITE_PARQUET_URL)",It="Error: Parquet URL not set (VITE_PARQUET_URL)",Or=To();function Lr(e){return R()}function Rr(e){return R()}function Mr(e,t){const n=(e.acc>>>0)+((Math.imul(t,-1028477379)|0)>>>0)|0,r=17;e.acc=Math.imul(n<<r|(n>>>(32-r|0)|0),668265263)|0}function Ir(e,t){e.acc=(e.acc>>>0)+4|0,Mr(e,t)}function Nr(e,t){return Lr(`${e}
  at ${mn(t)}
`)}function jr(e,t){return Rr(`${e}
  at ${mn(t)}
`)}function X(e){return{val:""}}function ee(e,t){const n=e;n.val=`${n.val}${String.fromCodePoint(t)}`}function ct(e,t){return(((Math.imul(e-55296|0,1024)|0)+t|0)-56320|0)+65536|0}function Ue(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function fn(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Hr(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Dr(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Pr(e,t){const n=e.length;return t>=0&&t<n?(V(e,t),e[t]):R()}function Ur(e,t){const n=e.length;return t<n?(V(e,t),e[t]):R()}function Br(e){const t={str:e,start:0,end:e.length},n=t.str,r=t.start,s=r+(t.end-t.start|0)|0;let o=r,c=-1,i=-1,a=-1,$=-1,d=-1,l=-1,u=-1,h=-1,_=-1,m=-1,p=-1,g=-1,w=-1,S=-1,O=-1;t:{let A;e:if(o<s){const D=o,k=n.charCodeAt(D);if(o=o+1|0,k<65){if(k<64)break t;for(;;)if(h=o,o<s){o:{const f=o,I=n.charCodeAt(f);if(o=o+1|0,I<55296){if(I<58)break o;if(I>58)break o;if(o<s){s:{const x=o,T=n.charCodeAt(x);if(o=o+1|0,T<56319){if(T<55296)break s;A=7;break e}else if(T>56319){if(T<65536)break s;break t}else{A=8;break e}}A=0;break e}else break t}else if(I>56318)if(I<57344)if(o<s){const x=o,T=n.charCodeAt(x);if(o=o+1|0,T<56320)break t;if(T>57343)break t;continue}else break t;else{if(I>65535)break t;break o}else if(o<s){const x=o,T=n.charCodeAt(x);if(o=o+1|0,T<56320)break t;if(T>65535)break t;continue}else break t}continue}else break t}else break t}else break t;let b=A;e:for(;;){const D=b;o:{s:switch(D){case 3:if(p=m,m=_,_=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296)if(f<58){if(f<48)break n;if(_=o,S=w,w=o,g=o,o<s){r:{const I=o,x=n.charCodeAt(I);if(o=o+1|0,x<59)if(x<46){if(x<45)break r;break o}else if(x>47)if(x<58){b=6;continue e}else{b=3;continue e}else break r;else if(x>55295)if(x<57344)if(x<56319){b=7;continue e}else{b=8;continue e}else{if(x>65535)break t;break r}else break r}b=0;continue e}else break t}else{if(f>58)break n;b=1;continue e}else if(f>56318)if(f<57344){b=8;continue e}else{if(f>65535)break t;break n}else{b=7;continue e}}b=0;continue e}else break t;case 2:if(_=o,w=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296)if(f<58){if(f<48)break n;b=2;continue e}else{if(f>58)break n;b=3;continue e}else if(f>56318)if(f<57344){b=8;continue e}else{if(f>65535)break t;break n}else{b=7;continue e}}b=0;continue e}else break t;case 0:if(_=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296){if(f<58)break n;if(f>58)break n;b=1;continue e}else if(f>56318)if(f<57344){b=8;continue e}else{if(f>65535)break t;break n}else{b=7;continue e}}b=0;continue e}else break t;case 8:if(o<s){const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<56320)break t;if(f>57343)break t;b=0;continue e}else break t;case 4:if(_=o,O=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296)if(f<58){if(f<48)break n;b=4;continue e}else{if(f>58)break n;if(p=m,m=_,_=o,o<s){r:{const I=o,x=n.charCodeAt(I);if(o=o+1|0,x<55296)if(x<58){if(x<48)break r;if(_=o,S=w,w=o,o<s){c:{const T=o,Y=n.charCodeAt(T);if(o=o+1|0,Y<55296)if(Y<58){if(Y<48)break c;b=5;continue e}else{if(Y>58)break c;b=3;continue e}else if(Y>56318)if(Y<57344){b=8;continue e}else{if(Y>65535)break t;break c}else{b=7;continue e}}b=0;continue e}else break s}else{if(x>58)break r;b=1;continue e}else if(x>56318)if(x<57344){b=8;continue e}else{if(x>65535)break t;break r}else{b=7;continue e}}b=0;continue e}else break t}else if(f>56318)if(f<57344){b=8;continue e}else{if(f>65535)break t;break n}else{b=7;continue e}}b=0;continue e}else break t;case 5:if(_=o,w=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296)if(f<58){if(f<48)break n;b=5;continue e}else{if(f>58)break n;b=3;continue e}else if(f>56318)if(f<57344){b=8;continue e}else{if(f>65535)break t;break n}else{b=7;continue e}}b=0;continue e}else break s;case 6:if(_=o,w=o,g=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<59)if(f<46){if(f<45)break n;break o}else if(f>47)if(f<58){b=6;continue e}else{b=3;continue e}else break n;else if(f>55295)if(f<57344)if(f<56319){b=7;continue e}else{b=8;continue e}else{if(f>65535)break t;break n}else break n}b=0;continue e}else break t;case 7:if(o<s){const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<56320)break t;if(f>65535)break t;b=0;continue e}else break t;case 1:if(m=_,_=o,o<s){n:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296)if(f<58){if(f<48)break n;b=2;continue e}else{if(f>58)break n;b=1;continue e}else if(f>56318)if(f<57344){b=8;continue e}else{if(f>65535)break t;break n}else{b=7;continue e}}b=0;continue e}else break t;default:break t}_=p,w=S,a=h,$=_,d=w,l=g,u=O,c=0,i=o;break t}if(m=p,_=o,w=S,o<s){o:{const k=o,f=n.charCodeAt(k);if(o=o+1|0,f<55296)if(f<58){if(f<48)break o;b=4;continue}else{if(f>58)break o;b=1;continue}else if(f>56318)if(f<57344){b=8;continue}else{if(f>65535)break t;break o}else{b=7;continue}}b=0;continue}else break t}}if(c===0){let A;t:{e:{const x=Q(n,$+1|0,d);if(x.$tag===1)A=x._0;else{x._0;break e}break t}A=R()}let b;t:{e:{const x=Q(n,d+1|0,l);if(x.$tag===1)b=x._0;else{x._0;break e}break t}b=R()}let D;t:{e:{const x=Q(n,r+1|0,a);if(x.$tag===1)D=x._0;else{x._0;break e}break t}D=R()}let k;t:{e:{const x=Q(n,a+1|0,$);if(x.$tag===1)k=x._0;else{x._0;break e}break t}k=R()}let f;t:{e:{const x=Q(n,l+1|0,u);if(x.$tag===1)f=x._0;else{x._0;break e}break t}f=R()}let I;t:{e:{const x=Q(n,u+1|0,i);if(x.$tag===1)I=x._0;else{x._0;break e}break t}I=R()}return{pkg:D,filename:k,start_line:A,start_column:b,end_line:f,end_column:I}}else return R()}function M(e,t){const n=e;n.val=`${n.val}${t}`}function Fr(e,t){bs(t,e)}function Vr(e){let t=e.acc;return t=t^(t>>>15|0),t=Math.imul(t,-2048144777)|0,t=t^(t>>>13|0),t=Math.imul(t,-1028477379)|0,t=t^(t>>>16|0),t}function zr(e){return Vr(e)}function Wr(e){return{acc:(e>>>0)+374761393|0}}function Gr(e){let t;return t=Or,Wr(t)}function Yr(e){const t=Gr();return Fr(t,e),zr(t)}function hn(e,t,n){const r=e.length;let s;if(n===void 0)s=r;else{const i=n;s=i<0?r+i|0:i}const o=t<0?r+t|0:t;if(o>=0&&o<=s&&s<=r){let c;if(o<r){const a=e.charCodeAt(o);c=56320<=a&&a<=57343}else c=!1;if(c)return new Ee(bt);let i;if(s<r){const a=e.charCodeAt(s);i=56320<=a&&a<=57343}else i=!1;return i?new Ee(bt):new Yt({str:e,start:o,end:s})}else return new Ee(qo)}function Q(e,t,n){let r;return t===void 0?r=0:r=t,hn(e,r,n)}function it(e,t,n,r){let s;t:{e:{const o=hn(t,n,n+r|0);if(o.$tag===1)s=o._0;else{o._0;break e}break t}s=R()}ce(e,s)}function Xr(e){const t=X(),n={self:t,method_table:dn};return e?n.method_table.method_0(n.self,"true"):n.method_table.method_0(n.self,"false"),t.val}function mn(e){const t=X();return ws(e,{self:t,method_table:dn}),t.val}function F(e,t){return Co(e,t)}function Jr(e){return e.str.substring(e.start,e.end)}function pn(e){const t=e.start,n=e.end,r={val:t};return()=>{if(r.val<n){const o=e.str,c=r.val,i=o.charCodeAt(c);if(55296<=i&&i<=56319&&(r.val+1|0)<e.end){const a=e.str,$=r.val+1|0,d=a.charCodeAt($);if(56320<=d&&d<=57343)return r.val=r.val+2|0,ct(i,d)}return r.val=r.val+1|0,i}else return-1}}function Qr(e){const t=e.start,n=e.end,r={val:t},s={val:0};return()=>{if(r.val<n){const o=e.str,c=r.val,i=o.charCodeAt(c);if(55296<=i&&i<=56319&&(r.val+1|0)<e.end){const $=e.str,d=r.val+1|0,l=$.charCodeAt(d);if(56320<=l&&l<=57343){const u={_0:s.val,_1:ct(i,l)};return r.val=r.val+2|0,s.val=s.val+1|0,u}}const a={_0:s.val,_1:i};return r.val=r.val+1|0,s.val=s.val+1|0,a}else return}}function qe(e,t,n){let r;return n===void 0?r=e.length:r=n,t>=0&&t<=r&&r<=e.length?{str:e,start:t,end:r}:jr("Invalid index for View","@moonbitlang/core/builtin:stringview.mbt:382:5-382:36")}function Kr(e){const t=X(Math.imul(e.end-e.start|0,4)|0),n=e.end-e.start|0;let r=0;for(;;){const s=r;if(s<n){const o=e.buf[e.start+s|0];ee(t,o),r=s+1|0;continue}else break}return t.val}function Zr(e,t,n,r){let s;r===void 0?s=e.length:s=r;let o=n,c=0;for(;;)return c===t&&o===s}function ce(e,t){const n=e;n.val=`${n.val}${Jr(t)}`}function es(e,t){const n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){const s=Qe(256,r),o=r-1|0;let c=0;for(;;){const a=c;if(a<o){const $=t.str,d=t.start+a|0,l=$.charCodeAt(d)&255;V(s,l),s[l]=(r-1|0)-a|0,c=a+1|0;continue}else break}let i=0;for(;;){const a=i;if(a<=(n-r|0)){const $=r-1|0;let d=0;for(;;){const m=d;if(m<=$){const p=a+m|0,g=e.str,w=e.start+p|0,S=g.charCodeAt(w),O=t.str,A=t.start+m|0;if(S!==O.charCodeAt(A))break;d=m+1|0;continue}else return a}const l=(a+r|0)-1|0,u=e.str,h=e.start+l|0,_=u.charCodeAt(h)&255;V(s,_),i=a+s[_]|0;continue}else break}return}else return;else return kr}function ts(e,t){const n=e.end-e.start|0,r=t.end-t.start|0;if(r>0)if(n>=r){const o=t.str,c=t.start+0|0,i=o.charCodeAt(c),a=n-r|0;let $=0;for(;$<=a;){for(;;){let d;if($<=a){const l=$,u=e.str,h=e.start+l|0;d=u.charCodeAt(h)!==i}else d=!1;if(d){$=$+1|0;continue}else break}if($<=a){let d=1;for(;;){const l=d;if(l<r){const u=$+l|0,h=e.str,_=e.start+u|0,m=h.charCodeAt(_),p=t.str,g=t.start+l|0;if(m!==p.charCodeAt(g))break;d=l+1|0;continue}else return $}$=$+1|0}continue}return}else return;else return xr}function bn(e,t){return(t.end-t.start|0)<=4?ts(e,t):es(e,t)}function ns(e,t){const n=Qr(e);for(;;){const r=ms(n);if(r===void 0)break;{const o=r,c=o._0,i=o._1;if(t(i))return c;continue}}}function gn(e,t){return ns({str:e,start:0,end:e.length},t)}function os(e,t){const n=bn(e,t);return n===void 0?!1:n===0}function be(e,t){return os({str:e,start:0,end:e.length},t)}function rs(e){return[]}function Me(e,t){le(e,t)}function Nt(e,t){le(e,t)}function ss(e,t){le(e,t)}function cs(e,t){le(e,t)}function $e(e,t){le(e,t)}function is(e,t){le(e,t)}function xe(e){return e()}function as(e){return e()}function $s(e,t){return bn(e,t)!==void 0}function at(e,t){return $s({str:e,start:0,end:e.length},t)}function $t(e){const t=e.length,n={val:0};return()=>{if(n.val<t){const s=n.val,o=e.charCodeAt(s);if(55296<=o&&o<=56319&&(n.val+1|0)<t){const c=n.val+1|0,i=e.charCodeAt(c);if(56320<=i&&i<=57343){const a=ct(o,i);return n.val=n.val+2|0,a}}return n.val=n.val+1|0,o}else return-1}}function jt(e){return e>=65&&e<=90}function ut(e){const t=gn(e,n=>jt(n));if(t===void 0)return e;{const r=t,s=X(e.length),o=qe(e,0,r);it(s,o.str,o.start,o.end-o.start|0);const c=pn(qe(e,r,void 0));for(;;){const i=xe(c);if(i===-1)break;{const $=i;jt($)?ee(s,$+32|0):ee(s,$);continue}}return s.val}}function Ht(e){return e>=97&&e<=122}function wn(e){const t=gn(e,n=>Ht(n));if(t===void 0)return e;{const r=t,s=X(e.length),o=qe(e,0,r);it(s,o.str,o.start,o.end-o.start|0);const c=pn(qe(e,r,void 0));for(;;){const i=xe(c);if(i===-1)break;{const $=i;Ht($)?ee(s,$-32|0):ee(s,$);continue}}return s.val}}function ve(e){return{str:e,start:0,end:e.length}}function us(e){const t=$t(e);let r=rs(e.length);for(;;){const s=xe(t);if(s===-1)break;{const c=s,i=r;is(i,c),r=i;continue}}return r}function kn(e){return e>=0?e<=1?1:e>1073741824?1073741824:(2147483647>>(Math.clz32(e-1|0)-1|0))+1|0:R()}function ls(e){const t=kn(e),n=t-1|0,r=(Math.imul(t,13)|0)/16|0;return{entries:Qe(t,void 0),size:0,capacity:t,capacity_mask:n,grow_at:r,head:void 0,tail:-1}}function _s(e,t,n){const r=e.tail;if(r===-1)e.head=n;else{const o=e.entries;V(o,r);const c=o[r];let i;c===void 0?i=R():i=c,i.next=n}e.tail=t;const s=e.entries;V(s,t),s[t]=n,e.size=e.size+1|0}function Dt(e,t,n){const r=e.entries;V(r,n),r[n]=t;const s=t.next;if(s===void 0){e.tail=n;return}else{const c=s;c.prev=n;return}}function ds(e,t,n){let r=n.psl+1|0,s=t+1&e.capacity_mask,o=n;for(;;){const c=r,i=s,a=o,$=e.entries;V($,i);const d=$[i];if(d===void 0){a.psl=c,Dt(e,a,i);break}else{const u=d;if(c>u.psl){a.psl=c,Dt(e,a,i),r=u.psl+1|0,s=i+1&e.capacity_mask,o=u;continue}else{r=c+1|0,s=i+1&e.capacity_mask;continue}}}}function xn(e,t,n,r){e.size>=e.grow_at&&fs(e);let s,o=0,c=r&e.capacity_mask;for(;;){const u=o,h=c,_=e.entries;V(_,h);const m=_[h];if(m===void 0){s={_0:h,_1:u};break}else{const g=m;if(g.hash===r&&g.key===t){g.value=n;return}if(u>g.psl){ds(e,h,g),s={_0:h,_1:u};break}o=u+1|0,c=h+1&e.capacity_mask;continue}}const i=s._0,a=s._1,l={prev:e.tail,next:void 0,psl:a,hash:r,key:t,value:n};_s(e,i,l)}function fs(e){const t=e.head,n=e.capacity<<1;e.entries=Qe(n,void 0),e.capacity=n,e.capacity_mask=n-1|0;const r=e.capacity;e.grow_at=(Math.imul(r,13)|0)/16|0,e.size=0,e.head=void 0,e.tail=-1;let s=t;for(;;){const o=s;if(o===void 0)return;{const i=o,a=i.next,$=i.key,d=i.value,l=i.hash;xn(e,$,d,l),s=a;continue}}}function Be(e,t,n){xn(e,t,n,Yr(t))}function hs(e){const t=e.end-e.start|0;let n=kn(t);t>((Math.imul(n,13)|0)/16|0)&&(n=Math.imul(n,2)|0);const s=ls(n),o=e.end-e.start|0;let c=0;for(;;){const i=c;if(i<o){const a=e.buf[e.start+i|0];Be(s,a._0,a._1),c=i+1|0;continue}else break}return s}function ms(e){return as(e)}function ps(e,t){const n=t.length;let r=0;for(;;){const s=r;if(s<n){Ir(e,t.charCodeAt(s)),r=s+1|0;continue}else return}}function bs(e,t){ps(t,e)}function gs(e,t){const n=e.pkg,r=n.str,s=n.start,o=s+(n.end-n.start|0)|0;let c=s,i=-1,a=-1,$=-1,d=-1,l;t:{e:{for(;;)if(c<o)o:{s:{const _=c,m=r.charCodeAt(_);if(c=c+1|0,m<55296){if(m<47)break s;if(m>47)break s;for(;;)if(d=c,c<o){n:{const p=c,g=r.charCodeAt(p);if(c=c+1|0,g<55296){if(g<47)break n;if(g>47)break n;for(;;)if(c<o){r:{const w=c,S=r.charCodeAt(w);if(c=c+1|0,S<56319){if(S<55296)break r;if(c<o){const O=c,A=r.charCodeAt(O);if(c=c+1|0,A<56320)break e;if(A>65535)break e;continue}else break e}else if(S>56319){if(S<65536)break r;break e}else if(c<o){const O=c,A=r.charCodeAt(O);if(c=c+1|0,A<56320)break e;if(A>57343)break e;continue}else break e}continue}else{$=d,i=0,a=c;break e}}else if(g>56318)if(g<57344)if(c<o){const w=c,S=r.charCodeAt(w);if(c=c+1|0,S<56320)break e;if(S>57343)break e;continue}else break e;else{if(g>65535)break e;break n}else if(c<o){const w=c,S=r.charCodeAt(w);if(c=c+1|0,S<56320)break e;if(S>65535)break e;continue}else break e}continue}else break e}else if(m>56318)if(m<57344)if(c<o){const p=c,g=r.charCodeAt(p);if(c=c+1|0,g<56320)break e;if(g>57343)break e;continue}else break e;else{if(m>65535)break e;break s}else if(c<o){const p=c,g=r.charCodeAt(p);if(c=c+1|0,g<56320)break e;if(g>65535)break e;continue}else break e;break o}continue}else break e;break t}if(i===0){let _;e:{o:{const p=Q(r,$+1|0,a);if(p.$tag===1)_=p._0;else{p._0;break o}break e}_=R()}let m;e:{o:{const p=Q(r,s,$);if(p.$tag===1)m=p._0;else{p._0;break o}break e}m=R()}l={_0:m,_1:_}}else l={_0:n,_1:void 0}}const u=l._0,h=l._1;if(h!==void 0){const m=h;t.method_table.method_2(t.self,m),t.method_table.method_3(t.self,47)}t.method_table.method_2(t.self,e.filename),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.start_column),t.method_table.method_3(t.self,45),t.method_table.method_2(t.self,e.end_line),t.method_table.method_3(t.self,58),t.method_table.method_2(t.self,e.end_column),t.method_table.method_3(t.self,64),t.method_table.method_2(t.self,u)}function ws(e,t){gs(Br(e),t)}function ks(e,t,n){const r=e.length;let s;if(n===void 0)s=r;else{const i=n;s=i<0?r+i|0:i}const o=t;return o>=0&&o<=s&&s<=r?{buf:e,start:o,end:s}:Nr("View index out of bounds","@moonbitlang/core/builtin:arrayview.mbt:251:5-251:38")}function xs(e,t){if((e.end-e.start|0)===0)return"";{const n=e.buf[e.start],r=e.buf,s=1+e.start|0,o=e.end,c={start:s,end:o},i=ve(n);let a=i.end-i.start|0;const $=c.end-c.start|0;let d=0;for(;;){const u=d;if(u<$){const h=r[s+u|0],_=a,m=ve(h);a=_+((m.end-m.start|0)+(t.end-t.start|0)|0)|0,d=u+1|0;continue}else break}a=a<<1;const l=X();if(ce(l,i),Zr(t.str,0,t.start,t.end)){const u=c.end-c.start|0;let h=0;for(;;){const _=h;if(_<u){const m=r[s+_|0],p=ve(m);ce(l,p),h=_+1|0;continue}else break}}else{const u=c.end-c.start|0;let h=0;for(;;){const _=h;if(_<u){const m=r[s+_|0],p=ve(m);ce(l,t),ce(l,p),h=_+1|0;continue}else break}}return l.val}}function ys(e,t){return xs({buf:e,start:0,end:e.length},t)}function Ss(e){switch(e){case 0:return Pn;case 1:return Un;case 2:return Bn;case 3:return Fn;case 4:return Vn;case 5:return zn;case 6:return Wn;case 7:return Gn;case 8:return Yn;case 9:return Xn;case 10:return Jn;case 11:return Qn;case 12:return Kn;case 13:return Zn;case 14:return eo;case 15:return to;case 16:return no;case 17:return ro;case 18:return so;case 19:return co;case 20:return io;case 21:return ao;case 22:return $o;case 23:return uo;case 24:return lo;case 25:return _o;case 26:return fo;case 27:return mo;case 28:return po;case 29:return bo;case 30:return go;case 31:return wo;case 32:return oo;case 33:return ho;case 34:return ko;case 35:return xo;case 36:return yo;case 37:return So;case 38:return vo;case 39:return Eo;default:return new Xe(e)}}function vs(e,t){const n=[],r=e.length;let s=0;for(;;){const o=s;if(o<r){o<t.length?Nt(n,Ss(Hr(t,o))):Nt(n,yr),s=o+1|0;continue}else break}return n}function Es(e,t){Lo(e,()=>{t(new Jt(void 0))},n=>{t(new Xt(new Je(n)))})}function te(e,t,n){Oo(e,t,(r,s,o,c)=>{const i=vs(r,c);n(new Kt({columns:r,column_types:i,rows:s,nulls:o}))},r=>{n(new Qt(new Je(r)))})}function As(e){switch(e){case"samples":return`SELECT timestamp, connection_id, rtc_type FROM ${K} USING SAMPLE 1 PERCENT (bernoulli)`;case"aggregation":return`SELECT time_bucket, channel_id, session_id, connection_id, bytes_sent_diff, bytes_received_diff, packets_sent_diff, packets_received_diff FROM ( SELECT time_bucket, channel_id, session_id, connection_id, bytes_sent - LAG(bytes_sent) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS bytes_sent_diff, bytes_received - LAG(bytes_received) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS bytes_received_diff, packets_sent - LAG(packets_sent) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS packets_sent_diff, packets_received - LAG(packets_received) OVER (PARTITION BY channel_id, session_id, connection_id ORDER BY time_bucket) AS packets_received_diff FROM ( SELECT strftime(time_bucket('15 seconds', strptime(timestamp, '%Y-%m-%dT%H:%M:%S.%fZ')), '%Y-%m-%d %H:%M:%S') AS time_bucket, channel_id, session_id, connection_id, MAX(CAST(rtc_data->'$.bytesSent' AS BIGINT)) AS bytes_sent, MAX(CAST(rtc_data->'$.bytesReceived' AS BIGINT)) AS bytes_received, MAX(CAST(rtc_data->'$.packetsSent' AS BIGINT)) AS packets_sent, MAX(CAST(rtc_data->'$.packetsReceived' AS BIGINT)) AS packets_received FROM ${K} WHERE rtc_type = 'transport' GROUP BY time_bucket, channel_id, session_id, connection_id ) ) WHERE bytes_sent_diff IS NOT NULL AND bytes_received_diff IS NOT NULL AND packets_sent_diff IS NOT NULL AND packets_received_diff IS NOT NULL ORDER BY time_bucket ASC`;case"describe":return`DESCRIBE ${K}`;default:return`SELECT * FROM ${K} LIMIT 10`}}function Ts(e){const t=X(),n=$t(e);for(;;){const r=xe(n);if(r===-1)break;{const o=r;o===39?M(t,"''"):ee(t,o);continue}}return t.val}function qs(e){const t=Ts(e);return`SELECT timestamp, connection_id, rtc_type FROM ${K} WHERE connection_id LIKE '%${t}%' OR channel_id LIKE '%${t}%' OR timestamp LIKE '%${t}%' OR rtc_type LIKE '%${t}%' USING SAMPLE 1 PERCENT (bernoulli)`}function Fe(e){const t=X(),n=$t(e);for(;;){const r=xe(n);if(r===-1)break;{const o=r;o===60?M(t,"&lt;"):o===62?M(t,"&gt;"):o===38?M(t,"&amp;"):o===34?M(t,"&quot;"):ee(t,o);continue}}return t.val}function Cs(e,t){const n=X(),r=e.rows.length,s=r>t?t:r;M(n,'<table class="result-table"><thead><tr>');let o=0;for(;;){const i=o;if(i<e.columns.length){M(n,"<th>"),M(n,Fe(Ue(e.columns,i))),M(n,"</th>"),o=i+1|0;continue}else break}M(n,"</tr></thead><tbody>");let c=0;for(;;){const i=c;if(i<s){M(n,"<tr>");let a=0;for(;;){const $=a;if($<e.columns.length){M(n,"<td>"),Dr(Pr(e.nulls,i),$)?M(n,'<span class="null">NULL</span>'):M(n,Fe(Ue(fn(e.rows,i),$))),M(n,"</td>"),a=$+1|0;continue}else break}M(n,"</tr>"),c=i+1|0;continue}else break}return M(n,"</tbody></table>"),r>t&&M(n,`<p class="notice">Showing ${F(t,10)} of ${F(r,10)} rows</p>`),n.val}function yn(e){return`<div class="error">${Fe(e)}</div>`}function Os(e){return Zt(e)?void 0:e}function lt(e){return Zt(e)?_e:new P(e)}function Ie(e,t,n,r,s,o,c){const i=[];Me(i,{_0:"capture",_1:r}),Me(i,{_0:"once",_1:s}),Me(i,{_0:"passive",_1:o}),se(e,"addEventListener",[t,n,Ro(i)])}function L(e,t){const n=se(e,"getAttribute",[t]);return Os(n)}function we(e,t){return se(e,"hasAttribute",[t])}function Ls(e,t){const n=se(e,"querySelector",[t]);return lt(n)}function Rs(e,t){const n=se(e,"querySelectorAll",[t]),r=Mo(n),s=new Array(r.length),o=r.length;let c=0;for(;;){const i=c;if(i<o){const a=r[i];s[i]=a,c=i+1|0;continue}else break}return s}function ye(e,t){const n=se(e,"closest",[t]);return lt(n)}function Pt(e,t){const n=se(e,"querySelector",[t]);return lt(n)}function Ms(e,t){return Io(e,t)}function Is(e){const t=ut(Oe(e));let n;if(t!=="form"?n=Do(e):n=!1,n){if(Uo(e),!jo(e)){const s=wt();return gt(s,"elt",e),gt(s,"message",wt()),Fo(e,s),!1}return!0}if(t==="form"){if(Ho(e))return!0;Po(e);const s=Bo(e);if(s.length>0){const o=Wo(s);if(Vo(e,o),Go()){const c=Ur(s,0);zo(c),No(e)}return!1}}return!0}function Ns(e,t){if(t.$tag===1){const r=t._0;if(Yo(r))return!0}return Is(e)}function Ne(e){switch(e){case"innerHTML":return 0;case"outerHTML":return 1;case"beforebegin":return 2;case"afterbegin":return 3;case"beforeend":return 4;case"afterend":return 5;case"delete":return 6;case"none":return 8;case"morph":return 7;default:return 0}}function js(e){switch(e){case 0:return"innerHTML";case 1:return"outerHTML";case 2:return"beforebegin";case 3:return"afterbegin";case 4:return"beforeend";case 5:return"afterend";case 6:return"delete";case 8:return"none";default:return"morph"}}function Ve(e){switch(e){case 0:return"GET";case 1:return"POST";case 2:return"PUT";case 3:return"DELETE";default:return"PATCH"}}function Hs(e){switch(e){case 1:return!0;case 2:return!0;case 4:return!0;case 0:return!1;default:return!1}}function Ut(e){switch(e){case"hx-get":return Sr;case"hx-post":return vr;case"hx-put":return Er;case"hx-delete":return Ar;case"hx-patch":return Tr;default:return}}function Sn(e){const t=hs({buf:Cr,start:0,end:1});if(e.$tag===1){const r=e._0,s=L(r,"id");s===void 0||Be(t,"HX-Trigger",s);const o=L(r,"name");o===void 0||Be(t,"HX-Trigger-Name",o)}return t}function Ds(e,t,n,r){const s=Sn(n),o=tn(s);en(e,Ve(t),n,o,r)}function Bt(e,t,n,r,s){const o=Sn(r),c=tn(o);if(n.$tag===1){const a=n._0;Xo(e,Ve(t),a,r,c,s);return}else{en(e,Ve(t),r,c,s);return}}function Ps(e,t){return t.length===0?e:at(e,{str:vt,start:0,end:vt.length})?`${e}&${t}`:`${e}?${t}`}function Us(e){const t=wn(Oe(e));t:switch(t){case"INPUT":{const n=L(e,"type"),r="text";let s;n===void 0?s=r:s=n;const o=ut(s);e:switch(o){case"checkbox":break e;case"radio":break e;case"file":return;default:return xt(e)}if(we(e,"checked")){const c=L(e,"value"),i="on";return c===void 0?i:c}else if(Qo(e)){const i=L(e,"value"),a="on";return i===void 0?a:i}else return}case"SELECT":break t;case"TEXTAREA":break t;default:return}return xt(e)}function Bs(e){const t=[],n=Rs(e,"input, select, textarea"),r=n.length;let s=0;for(;;){const o=s;if(o<r){const c=n[o],i=L(c,"name");if(i!==void 0){const $=i;if($.length>0){const d=Us(c);d===void 0||cs(t,{_0:$,_1:d})}}s=o+1|0;continue}else break}return t}function Fs(e){const t=e.length;let n=0;for(;;){const r=n;if(r<t){const s=e[r];er(s),tr(s),n=r+1|0;continue}else return}}function vn(e){const t=["hx-get","hx-post","hx-put","hx-delete","hx-patch"],n=t.length;let r=0;for(;;){const s=r;if(s<n){t:{const o=t[s];if(we(e,o)){const i=L(e,o);if(i===void 0)break t;{const $=i,d=Ut(o);if(d===void 0)break t;return{_0:d,_1:$}}}const c=`data-${o}`;if(we(e,c)){const i=L(e,c);if(i===void 0)break t;{const $=i,d=Ut(o);if(d===void 0)break t;return{_0:d,_1:$}}}break t}r=s+1|0;continue}else break}}function Vs(e,t){let n=e;for(;;){const s=nn(n);if(s.$tag===1){const c=s._0;if(t===""||Le(c,t))return new P(c);n=c;continue}else return _e}}function zs(e,t){const n=nn(e);if(n.$tag===1){const s=n._0;return t===""||Le(s,t)?new P(s):Vs(s,t)}else return _e}function Ws(e,t){let n=e;for(;;){const s=on(n);if(s.$tag===1){const c=s._0;if(t===""||Le(c,t))return new P(c);n=c;continue}else return _e}}function Gs(e,t){const n=on(e);if(n.$tag===1){const s=n._0;return t===""||Le(s,t)?new P(s):Ws(s,t)}else return _e}function ze(e,t){if(q(`parse_extended_target: selector = '${t}'`),t==="this")return q("parse_extended_target: this -> returning element"),new P(e);if(be(t,{str:Et,start:0,end:Et.length})){const n=pe(t,7);return q(`parse_extended_target: global '${n}'`),Pt(De(),n)}else if(be(t,{str:At,start:0,end:At.length})){const n=pe(t,8);return q(`parse_extended_target: closest '${n}'`),ye(e,n)}else if(be(t,{str:Tt,start:0,end:Tt.length})){const n=pe(t,5);return q(`parse_extended_target: find '${n}'`),Ls(e,n)}else if(be(t,{str:qt,start:0,end:qt.length})){const n=Pe(pe(t,4));q(`parse_extended_target: next with rest = '${n}'`);const r=zs(e,n);return r.$tag===1?q("parse_extended_target: next found element"):q("parse_extended_target: next NOT found"),r}else if(be(t,{str:Ct,start:0,end:Ct.length})){const n=Pe(pe(t,8));return q(`parse_extended_target: previous with rest = '${n}'`),Gs(e,n)}else return q(`parse_extended_target: default selector '${t}'`),Pt(De(),t)}function En(e,t){const n=ae(t),r=[],s=n.length;let o=0;for(;;){const c=o;if(c<s){const i=n[c];if(i!==""){const $=ze(e,i);if($.$tag===1){const l=$._0;ss(r,l)}}o=c+1|0;continue}else break}return r}function Ys(e){const t=L(e,"hx-disabled-elt");if(t===void 0){const n=L(e,"data-hx-disabled-elt");return n===void 0?void 0:n}else return t}function Ft(e){if(wn(Oe(e))==="FORM")return new ge(yt(e));const n=ye(e,"form");if(n.$tag===1){const s=n._0;return new ge(yt(s))}else return nr}function We(e){const t=L(e,"hx-indicator");if(t===void 0){const n=L(e,"data-hx-indicator");return n===void 0?void 0:n}else return t}function Xs(e){const t=We(e);if(t===void 0){const n=ye(e,"[hx-indicator], [data-hx-indicator]");if(n.$tag===1){const s=n._0,o=We(s);return o===void 0?void 0:{_0:s,_1:o}}else return}else return{_0:e,_1:t}}function Js(e,t){const n=ae(t),r=[],s=n.length;let o=0;for(;;){const c=o;if(c<s){const i=n[c];if(i==="inherit"){const a=ae(e),$=a.length;let d=0;for(;;){const l=d;if(l<$){const u=a[l];u!==""&&$e(r,u),d=l+1|0;continue}else break}}else i!==""&&$e(r,i);o=c+1|0;continue}else break}return Ke(r)}function Qs(e){const t=ae(e),n=[],r=t.length;let s=0;for(;;){const o=s;if(o<r){const c=t[o];let i;c!=="inherit"?i=c!=="":i=!1,i&&$e(n,c),s=o+1|0;continue}else break}return Ke(n)}function An(e){let t=e;for(;;){const r=Ze(t);if(r.$tag===1){const o=r._0;q("resolve_inherit_from_parent: found parent");const c=ye(o,"[hx-indicator], [data-hx-indicator]");if(c.$tag===1){const a=c._0;q("resolve_inherit_from_parent: closest found indicator_owner");const $=We(a);if($===void 0)return;{const l=$;if(q(`resolve_inherit_from_parent: selector = '${l}'`),at(l,{str:Ot,start:0,end:Ot.length})){const u=An(a);return u===void 0?Qs(l):Js(u,l)}else return l}}else{q("resolve_inherit_from_parent: closest not found, trying grandparent"),t=o;continue}}else{q("resolve_inherit_from_parent: no parent found");return}}}function Ks(e,t){q(`resolve_inherit: selector = '${t}'`);const n=ae(t),r=[],s=n.length;let o=0;for(;;){const i=o;if(i<s){const a=n[i];if(q(`resolve_inherit: part = '${a}', trim = '${Pe(a)}'`),a==="inherit"){q("resolve_inherit: part is inherit, calling resolve_inherit_from_parent");const $=An(e);if($===void 0)q("resolve_inherit: inherited is None");else{const l=$;q(`resolve_inherit: inherited = '${l}'`);const u=ae(l),h=u.length;let _=0;for(;;){const m=_;if(m<h){const p=u[m];p!==""&&$e(r,p),_=m+1|0;continue}else break}}}else a!==""&&$e(r,a);o=i+1|0;continue}else break}const c=Ke(r);return q(`resolve_inherit: result = '${c}'`),c}function Zs(e){const t=Xs(e);if(t===void 0)return q("get_indicator_elements: no indicator found, using element itself"),[e];{const r=t,s=r._0,o=r._1;q(`get_indicator_elements: found owner with selector '${o}'`);const c=Ks(s,o);q(`get_indicator_elements: resolved selector '${c}'`);const i=En(s,c);return q(`get_indicator_elements: found ${F(i.length,10)} targets`),i.length===0?[e]:i}}function ec(e,t){let n=e;for(;;){const s=Ze(n);if(s.$tag===1){const c=s._0,i=L(c,t);if(i===void 0){const a=`data-${t}`,$=L(c,a);if($===void 0){n=c;continue}else return $}else return i}else return}}function tc(e){const t=L(e,"hx-inherit");return t===void 0?L(e,"data-hx-inherit"):t}function nc(e,t){let n=e;for(;;){const s=Ze(n);if(s.$tag===1){const c=s._0,i=tc(c);if(i===void 0){n=c;continue}else{const d=sr(i),l=rr(d),u=or(d,t);if(l||u){const h=L(c,t);if(h===void 0){const _=`data-${t}`,m=L(c,_);if(m===void 0){n=c;continue}else return m}else return h}else{n=c;continue}}}else return}}function Tn(e,t){return cr()?nc(e,t):ec(e,t)}function oc(e){const t="hx-swap",n=L(e,t);if(n===void 0){const r=L(e,`data-${t}`);if(r===void 0){const s=Tn(e,t);return s===void 0?0:Ne(s)}else return Ne(r)}else return Ne(n)}function rc(e){const t="hx-target",n=L(e,t);let r;if(n===void 0?r=L(e,`data-${t}`):r=n,r===void 0){const s=Tn(e,t);if(s===void 0)return e;{const i=ze(e,s);return i.$tag===1?i._0:e}}else{const c=ze(e,r);return c.$tag===1?c._0:e}}function sc(e){const t=e.length;let n=0;for(;;){const r=n;if(r<t){const s=e[r];ar(s),ir(s),n=r+1|0;continue}else return}}function cc(e){if(e.length===0)return"";const t=[],n=e.length;let r=0;for(;;){const s=r;if(s<n){const o=e[s],c=o._0,i=o._1,a=St(c),$=St(i);$e(t,`${a}=${$}`),r=s+1|0;continue}else break}return ys(t,{str:Lt,start:0,end:Lt.length})}function Ce(e,t){G("process_element_with_trigger called");const n=vn(e);if(n!==void 0){const s=n,o=s._0,c=s._1;if(!Ns(e,t))return;const i=rc(e),a=oc(e),$=js(a),d=Ys(e);let l;if(d===void 0)G("No disabled-elt attribute found"),l=[];else{const p=d;G(`Found disabled-elt selector: ${p}`),l=En(e,p)}G(`Disabled elements count: ${F(l.length,10)}`);const u=Zs(e);u.length>0?G(`Found ${F(u.length,10)} indicator element(s)`):G("No indicator attribute found, using element itself"),G(`Indicator elements count: ${F(u.length,10)}`),u.length>0&&(G(`About to call show_indicators with count: ${F(u.length,10)}`),sc(u),G("show_indicators returned")),l.length>0&&(G(`About to call disable_elements with count: ${F(l.length,10)}`),Fs(l),G("disable_elements returned"));const h=Zo(e,i,$,c,l,u),_=Ms(new P(e),$r);if(Hs(o)){const m=Ft(e);if(m.$tag===1){const g=m._0;Jo(g,Se(_)),Bt(c,o,new ge(g),new P(e),h);return}else{const p=Se(_),g=Ko(e,p);Bt(c,o,new ge(g),new P(e),h);return}}else{const m=Ft(e);let p;if(m.$tag===1){const g=Bs(e),w=cc(g),S=Ps(c,w);p=kt(S,Se(_))}else p=kt(c,Se(_));Ds(p,o,new P(e),h);return}}}function ic(e){Ce(e,_e)}function _t(e){const t=["hx-get","hx-post","hx-put","hx-delete","hx-patch"],n=t.length;let r=0;for(;;){const s=r;if(s<n){const o=t[s];if(we(e,o))return new P(e);const c=`data-${o}`;if(we(e,c))return new P(e);r=s+1|0;continue}else break}return ye(e,"[hx-get], [hx-post], [hx-put], [hx-delete], [hx-patch], [data-hx-get], [data-hx-post], [data-hx-put], [data-hx-delete], [data-hx-patch]")}function ac(e){switch(ut(Oe(e))){case"input":return"change";case"textarea":return"change";case"select":return"change";case"form":return"submit";default:return"click"}}function dt(e){const t="hx-trigger",n=L(e,t);let r;if(n===void 0?r=L(e,`data-${t}`):r=n,r===void 0)return ac(e);{const o=r;if(at(o,{str:Rt,start:0,end:Rt.length})){const c=us(o);let i=c.length;const a=c.length;let $=0;for(;;){const d=$;if(d<a){if(c[d]===32){i=d;break}$=d+1|0;continue}else break}return Kr(ks(c,0,i))}else return o}}function $c(e){const t=e,n=et(e);if(ur(n)&&_r(n)){const s=lr(n);if(vn(s)!==void 0){Te(t),Ce(s,new P(n));return}}const r=_t(n);if(r.$tag===1){const o=r._0,c=dt(o);if(c==="click"||c==="load"){Te(t),Ce(o,new P(n));return}else return}else return}function uc(e){const t=e,n=et(e),r=_t(n);if(r.$tag===1){const o=r._0;if(dt(o)==="change"){Te(t),ic(o);return}else return}else return}function lc(e){const t=e,n=et(e),r=dr(e),s=_t(n);if(s.$tag===1){const c=s._0;if(dt(c)==="submit"){Te(t),Ce(c,r);return}else return}else return}function _c(){const t=De();Ie(t,"click",$c,!1,!1,!1),Ie(t,"change",uc,!1,!1,!1),Ie(t,"submit",lc,!1,!1,!1),hr(t),fr()}function dc(e){mr(t=>{e(new sn(t))},t=>{e(new rn(t))})}function qn(e,t){pr(e,n=>{t(new an(n))},n=>{t(new cn(n))})}function fc(e,t,n,r){br(e,t,n,()=>{r(new nt(void 0))},s=>{r(new tt(s))})}function Vt(e,t){gr(e,()=>{t(new nt(void 0))},n=>{t(new tt(n))})}function E(e){st("#status",e)}function ue(e){st("#result",e)}function Ae(e){st("#row-count",e)}function re(e){return e._0}function je(){C("Database ready!");const e=un(),t=ln();let n;e==="opfs"?n=`Ready (OPFS)${t===""||t==="duckdb.db"?"":` (${t})`}. Click 'Fetch Parquet' to load data.`:n=e==="memory"?"Ready (in-memory). Click 'Fetch Parquet' to load data.":"Ready. Click 'Fetch Parquet' to load data.",E(n),Z("#btn-fetch",!1),Z("#btn-execute",!1)}function Cn(e){C("Installing extensions..."),E("Installing extensions..."),te(e,"INSTALL parquet; LOAD parquet;",t=>{if(t.$tag===1){C("Parquet extension installed"),te(e,"INSTALL json; LOAD json;",n=>{if(n.$tag===1){C("JSON extension installed"),je();return}else{const s=n._0;U(`JSON extension failed: ${re(s)}`),je();return}});return}else{const r=t._0;U(`Parquet extension failed: ${re(r)}`),je();return}})}function Ge(){C("Opening in-memory database..."),E("Opening in-memory database..."),qn(":memory:",e=>{if(e.$tag===1){const n=e._0;$n(n),C("In-memory database opened successfully"),Cn(n);return}else{const n=e._0;U(`Failed to open database: ${n}`),E(`Error: Failed to initialize database - ${n}`);return}})}function hc(){C("Opening OPFS database..."),E("Opening persistent database..."),qn("duckdb.db",e=>{if(e.$tag===1){const n=e._0;$n(n);const r=un(),s=ln();C(r==="opfs"?s===""||s==="duckdb.db"?"OPFS database opened successfully":`OPFS database opened with alternate name: ${s}`:r==="memory"?"OPFS unavailable, using in-memory database":"Database opened successfully"),Cn(n);return}else{const n=e._0;U(`OPFS database failed: ${n}`),Ge();return}})}function mc(){_c(),C("Initializing application..."),E("Initializing DuckDB..."),dc(e=>{if(e.$tag===1){const n=e._0;if(C(`OPFS supported: ${Xr(n)}`),n){hc();return}else{Ge();return}}else{const n=e._0;U(`OPFS check failed: ${n}`),Ge();return}})}function ft(){if(ke())if(rt()){const e=de();if(e.$tag===1){const n=e._0,r=`SELECT COUNT(*) as cnt FROM ${K}`;te(n,r,s=>{if(s.$tag===1){const c=s._0;if(c.rows.length>0){const i=Ue(fn(c.rows,0),0);Ae(`Total rows: ${i}`);return}else return}else{Ae("Error counting rows");return}});return}else return}else{Ae("No data loaded");return}else return}function On(e){const t=_n();if(t===""){U(Mt),E(Mt),Z("#btn-fetch",!1);return}const n=`CREATE OR REPLACE TABLE ${K} AS SELECT * FROM read_parquet('${t}')`;te(e,n,r=>{if(r.$tag===1){ot(!0),C("Table created from URL"),E("Parquet data loaded successfully!"),Z("#btn-fetch",!1),ft();return}else{const o=r._0,c=re(o);U(`Direct URL query failed: ${c}`),E(`Error: Failed to load parquet - ${c}`),Z("#btn-fetch",!1);return}})}function pc(e){const t=`CREATE OR REPLACE TABLE ${K} AS SELECT * FROM read_parquet('stats.parquet')`;te(e,t,n=>{if(n.$tag===1){ot(!0),C("Table created from parquet"),E("Parquet data loaded successfully!"),Z("#btn-fetch",!1),ft();return}else{const s=n._0;U(`Table creation failed: ${re(s)}`),On(e);return}})}function bc(){if(ke()){const e=de();if(e.$tag===1){const n=e._0;C("Fetching parquet file..."),E("Fetching parquet file..."),Z("#btn-fetch",!0);const r=_n();if(r===""){U(It),E(It),Z("#btn-fetch",!1);return}fc(n,"stats.parquet",r,s=>{if(s.$tag===1){C("Remote file registered"),pc(n);return}else{const c=s._0;U(`Failed to register file: ${c}`),On(n);return}});return}else{E("Error: No connection");return}}else{E("Error: Database not initialized");return}}function ht(e){ue(Cs(e,1e3))}function gc(e){if(e.length===0){ue("");return}if(ke())if(rt()){const t=de();if(t.$tag===1){const r=t._0,s=qs(e);C(`Search: ${e}`),te(r,s,o=>{if(o.$tag===1){const i=o._0;C(`Search returned ${F(i.rows.length,10)} rows`),ht(i);return}else{const i=o._0,a=re(i);U(`Search failed: ${a}`),ue("");return}});return}else return}else return;else return}function wc(){if(ke()){const e=de();if(e.$tag===1){const n=e._0,r=wr();if(r.length===0){E("Please enter a SQL query");return}C(`Executing: ${r}`),E("Executing query..."),te(n,r,s=>{if(s.$tag===1){const c=s._0;C(`Query returned ${F(c.rows.length,10)} rows`),E(`Query completed: ${F(c.rows.length,10)} rows`),ht(c);return}else{const c=s._0,i=re(c);U(`Query failed: ${i}`),E(`Error: ${i}`),ue(yn("Error: (check console)"));return}});return}else{E("Error: No connection");return}}else{E("Error: Database not initialized");return}}function kc(e){if(ke())if(rt()){const t=de();if(t.$tag===1){const r=t._0,s=As(e);C(`Preset query: ${e}`),E(`Running preset: ${e}`),te(r,s,o=>{if(o.$tag===1){const i=o._0;C(`Preset query returned ${F(i.rows.length,10)} rows`),E(`Completed: ${F(i.rows.length,10)} rows`),ht(i);return}else{const i=o._0,a=re(i);U(`Preset query failed: ${a}`),E(`Error: ${a}`),ue(yn("Error: (check console)"));return}});return}else{E("Error: No connection");return}}else{E("Please load parquet data first");return}else{E("Error: Database not initialized");return}}function zt(){Vt("duckdb.db",e=>{if(e.$tag===1){Vt("duckdb.db-wal",t=>{if(t.$tag===1){ot(!1),E("Cache purged. Reload the page to restart."),ue(""),Ae(""),C("Cache purged");return}else{const r=t._0;U(`Failed to delete duckdb.db-wal: ${r}`),E("Cache purge failed (db-wal locked). Close other tabs and retry.");return}});return}else{const n=e._0;U(`Failed to delete duckdb.db: ${n}`),E("Cache purge failed (db locked). Close other tabs and retry.");return}})}function xc(){C("Purging cache..."),E("Purging cache...");const e=de();if(e.$tag===1){const n=e._0;Es(n,r=>{zt()});return}else{zt();return}}function yc(){mc()}function Sc(){wc()}function vc(){bc()}function Ec(){xc()}function Ac(){ft()}function Tc(e){kc(e)}function qc(e){gc(e)}const ie="https://duckdb-wasm-mbt.f12o.com/P78BHZM3MD3MV47JDZG47PB8PW.parquet";window.__parquet_url=ie;const Ln=ie.includes("/")?ie.split("/").pop():ie,Wt=document.getElementById("parquet-source");Wt&&(Wt.textContent=Ln||"VITE_PARQUET_URL not set");const He=document.getElementById("parquet-data-link");He&&(He.href=ie,He.textContent=Ln||ie);window.app={fetch_parquet:vc||void 0||(()=>console.error("fetch_parquet not found")),run_sql_query:Sc||void 0||(()=>console.error("run_sql_query not found")),run_preset_query:Tc||void 0||(()=>console.error("run_preset_query not found")),purge_cache:Ec||void 0||(()=>console.error("purge_cache not found")),get_row_count:Ac||void 0||(()=>console.error("get_row_count not found")),app_init:yc||void 0||(()=>console.error("app_init not found")),perform_search:qc||void 0||(()=>console.error("perform_search not found"))};const Gt=document.getElementById("search-input");Gt&&Gt.addEventListener("input",e=>{window.app.perform_search(e.target.value)});document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{window.app.app_init()}):window.app.app_init();
